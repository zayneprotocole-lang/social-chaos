import{a as d,d as E,ca as x,q as M,b0 as g,j as R}from"./sanity.config-DDbzIdEq.js";function w(u){const e=E.c(9),{comlink:r,type:s,previewKitConnection:n,loadersConnection:o}=u;let t;e[0]!==u.id?(t=x(u.id),e[0]=u.id,e[1]=t):t=e[1];const i=t,{selectedReleaseId:m}=M(),{draft:a,published:l,ready:f,version:_}=g(i,s,"low",m),v=n==="connected"||o==="connected";if(f&&a||l){let c;return e[2]!==r||e[3]!==a||e[4]!==i||e[5]!==v||e[6]!==l||e[7]!==_?(c=R.jsx(S,{comlink:r,draft:a,livePreviewEnabled:v,published:l,version:_},i),e[2]=r,e[3]=a,e[4]=i,e[5]=v,e[6]=l,e[7]=_,e[8]=c):c=e[8],c}return null}function S(u){const e=E.c(18),{comlink:r,draft:s,published:n,livePreviewEnabled:o,version:t}=u,[i,m]=d.useState(s),[a,l]=d.useState(n),[f,_]=d.useState(t);let v;e[0]!==r||e[1]!==s||e[2]!==o||e[3]!==i?._rev||e[4]!==a?._rev||e[5]!==f?._rev||e[6]!==n||e[7]!==t?(v=()=>{f?._rev!==t?._rev&&(d.startTransition(()=>_(t)),t&&r?.post("presentation/refresh",{source:"mutation",livePreviewEnabled:o,document:b(t)})),i?._rev!==s?._rev&&(d.startTransition(()=>m(s)),s&&r?.post("presentation/refresh",{source:"mutation",livePreviewEnabled:o,document:b(s)})),a?._rev!==n?._rev&&(d.startTransition(()=>l(n)),n&&r?.post("presentation/refresh",{source:"mutation",livePreviewEnabled:o,document:b(n)}))},e[0]=r,e[1]=s,e[2]=o,e[3]=i?._rev,e[4]=a?._rev,e[5]=f?._rev,e[6]=n,e[7]=t,e[8]=v):v=e[8];const c=i?._rev,P=a?._rev,h=f?._rev;let p;return e[9]!==r||e[10]!==s||e[11]!==o||e[12]!==n||e[13]!==c||e[14]!==P||e[15]!==h||e[16]!==t?(p=[r,s,o,c,P,n,h,t],e[9]=r,e[10]=s,e[11]=o,e[12]=n,e[13]=c,e[14]=P,e[15]=h,e[16]=t,e[17]=p):p=e[17],d.useEffect(v,p),null}function b(u){const{_id:e,_type:r,_rev:s,slug:n}=u;return{_id:e,_type:r,_rev:s,slug:n}}var y=d.memo(w);export{y as default};
