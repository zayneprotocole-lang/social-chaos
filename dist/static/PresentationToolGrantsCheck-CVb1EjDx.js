const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/QRCodeSVG-DLnZTNy8.js","static/sanity.config-DDbzIdEq.js","static/LiveQueries-iR2xhBGO.js","static/DisplayedDocumentBroadcaster-B37j9Pfo.js","static/PostMessageDocuments-anlp3jyj.js","static/PostMessageRefreshMutations-CXIQ0C1u.js","static/PostMessagePerspective-DBOcXekH.js","static/PostMessagePreviewSnapshots-BTw9-9Fl.js","static/PostMessageSchema-CfvPzu6O.js","static/PostMessageTelemetry-rvKTFnZr.js"])))=>i.map(i=>d[i]);
import{bf as xn,a as y,bg as vr,bh as Pn,j as u,bi as bn,bj as Sn,bk as Rr,bl as Cr,bm as Ar,bn as Tr,bo as kr,bp as Ir,bq as Mr,br as nr,bs as ar,bt as pt,bu as vt,bv as ir,bw as sr,bx as wt,by as or,bz as cr,ac as Ur,bA as _n,bB as $r,bC as jn,bD as En,d as z,bE as ae,bF as Dr,bG as Rn,u as Dt,bH as Lr,bI as Or,aM as yt,n as Lt,p as Te,bJ as ke,bK as zr,bL as Nr,bM as Wr,bN as Cn,bO as Fr,bP as An,a6 as Tn,z as kt,x as kn,q as Vr,bQ as ie,bR as In,bS as ge,bT as Mn,bU as lr,bV as Un,bW as gr,bX as $n,ai as ur,bY as Dn,bZ as Br,b_ as Zt,b$ as Ln,C as me,F as le,c0 as Kr,c1 as xt,as as Oe,l as It,T as se,S as He,aa as Mt,f as Ut,c2 as ze,c3 as On,c4 as Hr,c5 as dr,c6 as zn,c7 as Nn,c8 as Wn,J as ye,ag as Fn,N as we,c as Vn,c9 as pr,ca as Pt,cb as Bn,cc as Kn,Q as Hn,cd as Gr,ce as gt,cf as Gn,cg as Ot,ch as qn,ci as Qn,cj as Xn,ck as Jn,cl as qr,aR as Yn,cm as Zn,cn as ea,co as ta,b6 as ra,W as na,Y as aa,cp as ia,cq as sa,X as oa,cr as ca,cs as la,ct as ua,cu as da,cv as pa,cw as ma,aV as Qr,cx as ha,aG as Xr,b7 as Jr,cy as fa,cz as va,cA as ga,cB as wa,cC as ya,cD as xa,cE as Pa,cF as ba,a1 as Sa,cG as _a,cH as ja}from"./sanity.config-DDbzIdEq.js";import{D as Ea,i as Ra}from"./DisplayedDocumentBroadcaster-B37j9Pfo.js";function Ca({children:r,isValidProp:e,...t}){e&&xn(e),t={...y.useContext(vr),...t},t.isStatic=Pn(()=>t.isStatic);const a=y.useMemo(()=>t,[JSON.stringify(t.transition),t.transformPagePoint,t.reducedMotion]);return u.jsx(vr.Provider,{value:a,children:r})}const Aa={"handshake/syn":Mr,"handshake/syn-ack":Ir,"handshake/ack":kr,"channel/response":Tr,"channel/heartbeat":Ar,"channel/disconnect":Cr,"overlay/focus":"visual-editing/focus","overlay/navigate":"visual-editing/navigate","overlay/toggle":"visual-editing/toggle","presentation/toggleOverlay":"presentation/toggle-overlay"},Ta={[Mr]:"handshake/syn",[Ir]:"handshake/syn-ack",[kr]:"handshake/ack",[Tr]:"channel/response",[Ar]:"channel/heartbeat",[Cr]:"channel/disconnect","visual-editing/focus":"overlay/focus","visual-editing/navigate":"overlay/navigate","visual-editing/toggle":"overlay/toggle","presentation/toggle-overlay":"presentation/toggleOverlay"},ka=r=>{const{data:e}=r;return e&&typeof e=="object"&&"domain"in e&&"type"in e&&"from"in e&&"to"in e&&(e.domain==="sanity/channels"&&(e.domain=Rr),e.to==="overlays"&&(e.to="visual-editing"),e.from==="overlays"&&(e.from="visual-editing"),e.channelId=e.connectionId,delete e.connectionId,e.type=Aa[e.type]??e.type),r},Ia=r=>{const{channelId:e,...t}=r,a={...t,connectionId:e};return a.domain===Rr&&(a.domain="sanity/channels"),a.to==="visual-editing"&&(a.to="overlays"),a.from==="visual-editing"&&(a.from="overlays"),a.type=Ta[a.type]??a.type,a.type==="channel/response"&&a.responseTo&&!a.data&&(a.data={responseTo:a.responseTo}),(a.type==="handshake/syn"||a.type==="handshake/syn-ack"||a.type==="handshake/ack")&&(a.data={id:a.connectionId}),a},Ma=({context:r},e)=>{const{sources:t,targetOrigin:a}=r,i=Ia(e.message);t.forEach(n=>{n.postMessage(i,{targetOrigin:a})})},er=()=>({listen:Sn(ka),requestMachine:bn().provide({actions:{"send message":Ma}})}),ce=[];for(let r=0;r<256;++r)ce.push((r+256).toString(16).slice(1));function Ua(r,e=0){return(ce[r[e+0]]+ce[r[e+1]]+ce[r[e+2]]+ce[r[e+3]]+"-"+ce[r[e+4]]+ce[r[e+5]]+"-"+ce[r[e+6]]+ce[r[e+7]]+"-"+ce[r[e+8]]+ce[r[e+9]]+"-"+ce[r[e+10]]+ce[r[e+11]]+ce[r[e+12]]+ce[r[e+13]]+ce[r[e+14]]+ce[r[e+15]]).toLowerCase()}let Gt;const $a=new Uint8Array(16);function Da(){if(!Gt){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Gt=crypto.getRandomValues.bind(crypto)}return Gt($a)}const La=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),wr={randomUUID:La};function Oa(r,e,t){if(wr.randomUUID&&!r)return wr.randomUUID();r=r||{};const a=r.random??r.rng?.()??Da();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,Ua(a)}function za(r){const e=new URL(r),{searchParams:t}=e;return t.delete(nr),t.delete(ar),t.delete(pt),t.delete(vt),t.delete(ir),e}function Na(r,e,t,a){const i=new URL(r),{searchParams:n}=i;return e&&(n.set(ar,e),n.set(nr,t)),n.set(pt,a),i}function Yr(){if(typeof crypto<"u"){const r=new Uint8Array(16);crypto.getRandomValues(r);let e="";for(let t=0;t<r.length;t++)e+=r[t].toString(16).padStart(2,"0");return e=btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]+$/,""),e}return Math.random().toString(36).slice(2)}async function Wa(r,e,t,a){const i=r.withConfig({apiVersion:sr}),n=Yr(),s=i.patch(wt).set({secret:n,studioUrl:t,userId:a});return await i.transaction().createIfNotExists({_id:wt,_type:or,source:e,studioUrl:t,userId:a}).patch(s).commit({tag:cr}),{secret:n}}async function Fa(r,e,t,a){const i=r.withConfig({apiVersion:sr}),n=i.patch(wt).set({secret:null,studioUrl:t,userId:a});await i.transaction().createIfNotExists({_id:wt,_type:or,source:e,studioUrl:t,userId:a}).patch(n).commit({tag:cr})}function Va(r){for(var e=[],t=0;t<r.length;){var a=r[t];if(a==="*"||a==="+"||a==="?"){e.push({type:"MODIFIER",index:t,value:r[t++]});continue}if(a==="\\"){e.push({type:"ESCAPED_CHAR",index:t++,value:r[t++]});continue}if(a==="{"){e.push({type:"OPEN",index:t,value:r[t++]});continue}if(a==="}"){e.push({type:"CLOSE",index:t,value:r[t++]});continue}if(a===":"){for(var i="",n=t+1;n<r.length;){var s=r.charCodeAt(n);if(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||s===95){i+=r[n++];continue}break}if(!i)throw new TypeError("Missing parameter name at ".concat(t));e.push({type:"NAME",index:t,value:i}),t=n;continue}if(a==="("){var o=1,c="",n=t+1;if(r[n]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(n));for(;n<r.length;){if(r[n]==="\\"){c+=r[n++]+r[n++];continue}if(r[n]===")"){if(o--,o===0){n++;break}}else if(r[n]==="("&&(o++,r[n+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(n));c+=r[n++]}if(o)throw new TypeError("Unbalanced pattern at ".concat(t));if(!c)throw new TypeError("Missing pattern at ".concat(t));e.push({type:"PATTERN",index:t,value:c}),t=n;continue}e.push({type:"CHAR",index:t,value:r[t++]})}return e.push({type:"END",index:t,value:""}),e}function Ba(r,e){e===void 0&&(e={});for(var t=Va(r),a=e.prefixes,i=a===void 0?"./":a,n=e.delimiter,s=n===void 0?"/#?":n,o=[],c=0,l=0,m="",p=function(v){if(l<t.length&&t[l].type===v)return t[l++].value},h=function(v){var A=p(v);if(A!==void 0)return A;var M=t[l],k=M.type,U=M.index;throw new TypeError("Unexpected ".concat(k," at ").concat(U,", expected ").concat(v))},d=function(){for(var v="",A;A=p("CHAR")||p("ESCAPED_CHAR");)v+=A;return v},f=function(v){for(var A=0,M=s;A<M.length;A++){var k=M[A];if(v.indexOf(k)>-1)return!0}return!1},g=function(v){var A=o[o.length-1],M=v||(A&&typeof A=="string"?A:"");if(A&&!M)throw new TypeError('Must have text between two parameters, missing text after "'.concat(A.name,'"'));return!M||f(M)?"[^".concat(Ve(s),"]+?"):"(?:(?!".concat(Ve(M),")[^").concat(Ve(s),"])+?")};l<t.length;){var x=p("CHAR"),w=p("NAME"),b=p("PATTERN");if(w||b){var j=x||"";i.indexOf(j)===-1&&(m+=j,j=""),m&&(o.push(m),m=""),o.push({name:w||c++,prefix:j,suffix:"",pattern:b||g(j),modifier:p("MODIFIER")||""});continue}var P=x||p("ESCAPED_CHAR");if(P){m+=P;continue}m&&(o.push(m),m="");var S=p("OPEN");if(S){var j=d(),E=p("NAME")||"",_=p("PATTERN")||"",R=d();h("CLOSE"),o.push({name:E||(_?c++:""),pattern:E&&!_?g(j):_,prefix:j,suffix:R,modifier:p("MODIFIER")||""});continue}h("END")}return o}function Ka(r,e){var t=[],a=en(r,t,e);return Ha(a,t,e)}function Ha(r,e,t){t===void 0&&(t={});var a=t.decode,i=a===void 0?function(n){return n}:a;return function(n){var s=r.exec(n);if(!s)return!1;for(var o=s[0],c=s.index,l=Object.create(null),m=function(h){if(s[h]===void 0)return"continue";var d=e[h-1];d.modifier==="*"||d.modifier==="+"?l[d.name]=s[h].split(d.prefix+d.suffix).map(function(f){return i(f,d)}):l[d.name]=i(s[h],d)},p=1;p<s.length;p++)m(p);return{path:o,index:c,params:l}}}function Ve(r){return r.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Zr(r){return r&&r.sensitive?"":"i"}function Ga(r,e){if(!e)return r;for(var t=/\((?:\?<(.*?)>)?(?!\?)/g,a=0,i=t.exec(r.source);i;)e.push({name:i[1]||a++,prefix:"",suffix:"",modifier:"",pattern:""}),i=t.exec(r.source);return r}function qa(r,e,t){var a=r.map(function(i){return en(i,e,t).source});return new RegExp("(?:".concat(a.join("|"),")"),Zr(t))}function Qa(r,e,t){return Xa(Ba(r,t),e,t)}function Xa(r,e,t){t===void 0&&(t={});for(var a=t.strict,i=a===void 0?!1:a,n=t.start,s=n===void 0?!0:n,o=t.end,c=o===void 0?!0:o,l=t.encode,m=l===void 0?function(A){return A}:l,p=t.delimiter,h=p===void 0?"/#?":p,d=t.endsWith,f=d===void 0?"":d,g="[".concat(Ve(f),"]|$"),x="[".concat(Ve(h),"]"),w=s?"^":"",b=0,j=r;b<j.length;b++){var P=j[b];if(typeof P=="string")w+=Ve(m(P));else{var S=Ve(m(P.prefix)),E=Ve(m(P.suffix));if(P.pattern)if(e&&e.push(P),S||E)if(P.modifier==="+"||P.modifier==="*"){var _=P.modifier==="*"?"?":"";w+="(?:".concat(S,"((?:").concat(P.pattern,")(?:").concat(E).concat(S,"(?:").concat(P.pattern,"))*)").concat(E,")").concat(_)}else w+="(?:".concat(S,"(").concat(P.pattern,")").concat(E,")").concat(P.modifier);else{if(P.modifier==="+"||P.modifier==="*")throw new TypeError('Can not repeat "'.concat(P.name,'" without a prefix and suffix'));w+="(".concat(P.pattern,")").concat(P.modifier)}else w+="(?:".concat(S).concat(E,")").concat(P.modifier)}}if(c)i||(w+="".concat(x,"?")),w+=t.endsWith?"(?=".concat(g,")"):"$";else{var R=r[r.length-1],v=typeof R=="string"?x.indexOf(R[R.length-1])>-1:R===void 0;i||(w+="(?:".concat(x,"(?=").concat(g,"))?")),v||(w+="(?=".concat(x,"|").concat(g,")"))}return new RegExp(w,Zr(t))}function en(r,e,t){return r instanceof RegExp?Ga(r,e):Array.isArray(r)?qa(r,e,t):Qa(r,e,t)}async function Ja(r,e,t,a,i=Ur()){const n=r.withConfig({apiVersion:sr});try{const s=new Date(Date.now()+1e3*_n),o=`drafts.${i}`,c=Yr(),l=n.patch(o).set({secret:c,source:e,studioUrl:t,userId:a});return await n.transaction().createOrReplace({_id:o,_type:$r}).patch(l).commit({tag:cr}),{secret:c,expiresAt:s}}finally{try{await n.delete({query:jn})}catch(s){console.error("Failed to delete expired secrets",s)}}}function Ya(r,e){let t=new AbortController,a=[];async function i(s,o){const{result:c,syncTags:l}=await r.fetch(En,{},{filterResponse:!1,lastLiveEventId:s,tag:"preview-url-secret.fetch-vercel-bypass-protection-secret"});Array.isArray(l)&&(a=l),o.aborted||e(c)}const n=r.live.events().subscribe({next:s=>{s.type==="message"&&(t.abort(),t=new AbortController,s.tags.some(o=>a.includes(o))&&i(s.id,t.signal))},error:s=>console.error(s)});return i(null,t.signal),()=>{n.unsubscribe(),t.abort()}}const Za=r=>{const e=z.c(3),{comlink:t}=r;let a,i;return e[0]!==t?(a=()=>t.on("visual-editing/features",ti),i=[t],e[0]=t,e[1]=a,e[2]=i):(a=e[1],i=e[2]),y.useEffect(a,i),null};var ei=y.memo(Za);function ti(){return{features:{optimistic:!0}}}const ri=zr({actions:{},actors:{},guards:{}}).createMachine({id:"Presentation Tool",context:{url:null,error:null,visualEditingOverlaysEnabled:!1},on:{"iframe reload":{actions:ie({url:null}),target:".loading"}},states:{error:{description:"Failed to load, either because of a misconfiguration, a network error, or an unexpected error",tags:["error"]},loading:{on:{"iframe loaded":{target:"loaded"}},tags:["busy"]},loaded:{on:{"toggle visual editing overlays":{actions:ie({visualEditingOverlaysEnabled:({event:r})=>r.enabled})},"iframe refresh":{target:".refreshing"},"iframe reload":{target:".reloading"}},states:{idle:{},refreshing:{on:{"iframe loaded":{target:"idle"}},tags:["busy"]},reloading:{on:{"iframe loaded":{target:"idle"}},tags:["busy"]}},initial:"idle"}},initial:"loading"}),ni=function(r){const e=z.c(14),{comlink:t,children:a}=r;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={},e[0]=i):i=e[0];const n=y.useRef(i);let s,o;e[1]!==t?(s=()=>t?.on("visual-editing/shared-state",()=>({state:n.current})),o=[t],e[1]=t,e[2]=s,e[3]=o):(s=e[2],o=e[3]),y.useEffect(s,o);let c;e[4]!==t?(c=(g,x)=>{n.current[g]=x,t?.post("presentation/shared-state",{key:g,value:x})},e[4]=t,e[5]=c):c=e[5];const l=c;let m;e[6]!==t?(m=g=>{t?.post("presentation/shared-state",{key:g}),delete n.current[g]},e[6]=t,e[7]=m):m=e[7];const p=m;let h;e[8]!==p||e[9]!==l?(h={removeValue:p,setValue:l},e[8]=p,e[9]=l,e[10]=h):h=e[10];const d=h;let f;return e[11]!==a||e[12]!==d?(f=u.jsx(la.Provider,{value:d,children:a}),e[11]=a,e[12]=d,e[13]=f):f=e[13],f},ai=ye.div`
  overflow: hidden;
  flex-basis: 0;
  flex-shrink: 1;
`,mr=function(r){const e=z.c(15),{children:t,defaultSize:a,id:i,minWidth:n,maxWidth:s,order:o}=r,c=a===void 0?null:a,l=o===void 0?0:o,m=y.useContext(dr);if(m===null)throw Error("Panel components must be rendered within a PanelGroup container");const{getPanelStyle:p,registerElement:h,unregisterElement:d}=m;let f;e[0]!==p||e[1]!==i?(f=p(i),e[0]=p,e[1]=i,e[2]=f):f=e[2];const g=f;let x,w;e[3]!==c||e[4]!==i||e[5]!==s||e[6]!==n||e[7]!==l||e[8]!==h||e[9]!==d?(x=()=>(h(i,{id:i,type:"panel",defaultSize:c,maxWidth:s??null,minWidth:n??0,order:l}),()=>{d(i)}),w=[i,c,l,s,n,h,d],e[3]=c,e[4]=i,e[5]=s,e[6]=n,e[7]=l,e[8]=h,e[9]=d,e[10]=x,e[11]=w):(x=e[10],w=e[11]),y.useLayoutEffect(x,w);let b;return e[12]!==t||e[13]!==g?(b=u.jsx(ai,{style:g,children:t}),e[12]=t,e[13]=g,e[14]=b):b=e[14],b};function tn(r,e){let t;return(...a)=>{clearTimeout(t),t=setTimeout(()=>{r.apply(r,a)},e)}}const rn="presentation/panels",nn=()=>JSON.parse(localStorage.getItem(rn)||"{}"),ii=r=>{localStorage.setItem(rn,JSON.stringify(r))},an=r=>r.map(e=>[e.id,e.order].join(":")).join(",");function si(){const r=z.c(1),e=ci,t=oi;let a;if(r[0]===Symbol.for("react.memo_cache_sentinel")){const i=tn(t,100);a={get:e,set:t,setDebounced:i},r[0]=a}else a=r[0];return a}function oi(r,e){const t=nn(),a=an(r),i={...t,[a]:e};ii(i)}function ci(r){const e=nn(),t=an(r);return Array.isArray(e[t])&&e[t].some(li)?void 0:e[t]}function li(r){return r===null}function tr(r,e,t){const{maxWidth:a,minWidth:i}=r,n=a==null?100:a/t*100,s=i/t*100;return Math.min(n,Math.max(s,e))}function ui(r,e,t,a,i,n){const{panels:s,widths:o}=i,{widths:c}=n,l=c||o,m=[...l];{const f=r<0?a:t,g=s.findIndex(b=>b.id===f.id),x=l[g],w=tr(f,x+Math.abs(r),e);if(x===w)return l;r=r<0?x-w:w-x}let p=0,h=r<0?t:a,d=s.findIndex(f=>f.id===h.id);for(;;){const f=s[d],g=l[d],x=Math.abs(r)-Math.abs(p),w=tr(f,g-x,e);if(g!==w&&(p+=g-w,m[d]=w,p.toPrecision(10).localeCompare(Math.abs(r).toPrecision(10),void 0,{numeric:!0})>=0))break;if(r<0){if(--d<0)break}else if(++d>=s.length)break}return p===0?l:(h=r<0?a:t,d=s.findIndex(f=>f.id===h.id),m[d]=l[d]+p,m)}function di(r,e,t){if(r.length===1)return"100";const a=r.findIndex(n=>n.id===e),i=t[a];return i==null?"0":i.toPrecision(10)}function yr(r,e,t=0,a=null){const i=r.clientX,n=(a||e.getBoundingClientRect()).left;return i-n-t}function qt(r){return r.type==="panel"}function xr(r){return r.type==="resizer"}function Pr(r){return Array.from(r.values()).sort(({order:e},{order:t})=>e==null&&t==null?0:e==null?-1:t==null?1:e-t)}function br(r,e,t){const a=e.reduce((s,o)=>s+o,0),i=[...e].map(s=>s/a*100);let n=0;for(let s=0;s<r.length;s++){const o=r[s],c=i[s],l=tr(o,c,t);c!=l&&(n+=c-l,i[s]=l)}if(n.toFixed(3)!=="0.000")for(let s=0;s<r.length;s++){const o=r[s];let{maxWidth:c,minWidth:l}=o;l=l/t*100,c!=null&&(c=c/t*100);const m=Math.min(c??100,Math.max(l,i[s]+n));if(m!==i[s]&&(n-=m-i[s],i[s]=m,Math.abs(n).toFixed(3)==="0.000"))break}return i}function pi(r){let e=r.length,t=100;const a=r.map(n=>n.defaultSize?(t-=n.defaultSize,e-=1,n.defaultSize):null),i=t/e;return a.map(n=>n===null?i:n)}const mi=ye.div`
  display: flex;
  flex-direction: row;
  height: 100%;
  overflow: hidden;
  width: 100%;
`,hi=function(r){const e=z.c(46),{children:t}=r,a=y.useRef(null);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=new Map,e[0]=i):i=e[0];const[n,s]=y.useState(i);let o;e[1]!==n?(o=Pr(n).filter(qt),e[1]=n,e[2]=o):o=e[2];const c=o;let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[3]=l):l=e[3];const[m,p]=y.useState(l),[h,d]=y.useState(null);let f;e[4]!==n||e[5]!==c||e[6]!==m?(f={elements:n,panels:c,widths:m},e[4]=n,e[5]=c,e[6]=m,e[7]=f):f=e[7];const g=y.useRef(f);let x;e[8]!==h||e[9]!==c||e[10]!==m?(x=$=>({flexGrow:di(c,$,m),pointerEvents:h===null?void 0:"none"}),e[8]=h,e[9]=c,e[10]=m,e[11]=x):x=e[11];const w=x;let b;e[12]===Symbol.for("react.memo_cache_sentinel")?(b=($,F)=>{s(H=>{if(H.has($))return H;const ee=new Map(H);return ee.set($,F),ee})},e[12]=b):b=e[12];const j=b;let P;e[13]===Symbol.for("react.memo_cache_sentinel")?(P=$=>{s(F=>{if(!F.has($))return F;const H=new Map(F);return H.delete($),H})},e[13]=P):P=e[13];const S=P;let E;e[14]===Symbol.for("react.memo_cache_sentinel")?(E={containerWidth:window.innerWidth,dragOffset:0,panelAfter:null,panelBefore:null,resizerIndex:-1,resizerRect:null,startX:0,widths:[]},e[14]=E):E=e[14];const _=y.useRef(E);let R;e[15]!==n?(R=($,F)=>{const H=Pr(n),ee=H.findIndex(I=>I.id===$),Y=n.get($);if(!Y||!xr(Y))return;const re=Y.el.current;re&&(_.current={resizerIndex:ee,panelBefore:H.reduce((I,q,Q)=>qt(q)&&Q<ee?q:I,null),panelAfter:H.reduce((I,q,Q)=>I===null&&qt(q)&&Q>ee?q:I,null),containerWidth:window.innerWidth,startX:F.pageX,dragOffset:yr(F,re),resizerRect:re.getBoundingClientRect(),widths:g.current.widths},d($))},e[15]=n,e[16]=R):R=e[16];const v=R;let A;e[17]===Symbol.for("react.memo_cache_sentinel")?(A=()=>{d(null)},e[17]=A):A=e[17];const M=A;let k;e[18]!==n?(k=($,F)=>{F.preventDefault(),F.stopPropagation();const{containerWidth:H,dragOffset:ee,panelBefore:Y,panelAfter:re,resizerRect:I}=_.current;if(Y==null||re==null)return;const q=n.get($);if(!q||!xr(q))return;const Q=q.el.current;if(!Q)return;const oe=yr(F,Q,ee,I);if(oe===0)return;const{widths:xe}=g.current,he=a.current.getBoundingClientRect(),fe=oe/he.width*100,de=ui(fe,H,Y,re,g.current,_.current);xe.some((ve,pe)=>ve!==de[pe])&&p(de)},e[18]=n,e[19]=k):k=e[19];const U=k;let O,T;e[20]!==n||e[21]!==c||e[22]!==m?(O=()=>{g.current.elements=n,g.current.panels=c,g.current.widths=m},T=[n,c,m],e[20]=n,e[21]=c,e[22]=m,e[23]=O,e[24]=T):(O=e[23],T=e[24]),y.useLayoutEffect(O,T);const W=si();let C,V;e[25]!==c||e[26]!==W?(C=()=>{const{widths:$}=g.current;if($.length===c.length)return;const F=W.get(c);if(F){const ee=br(c,F,window.innerWidth);p(ee);return}const H=pi(c);p(H)},V=[W,c],e[25]=c,e[26]=W,e[27]=C,e[28]=V):(C=e[27],V=e[28]),y.useLayoutEffect(C,V);let N,G;e[29]!==c||e[30]!==W||e[31]!==m?(N=()=>{m.length&&W.setDebounced(c,m)},G=[W,c,m],e[29]=c,e[30]=W,e[31]=m,e[32]=N,e[33]=G):(N=e[32],G=e[33]),y.useEffect(N,G);let L,K;e[34]===Symbol.for("react.memo_cache_sentinel")?(L=()=>{const $=new ResizeObserver(()=>{const{panels:F,widths:H}=g.current,ee=br(F,H,window.innerWidth);H.some((Y,re)=>Y!==ee[re])&&p(ee)});return $.observe(a.current),()=>{$.disconnect()}},K=[],e[34]=L,e[35]=K):(L=e[34],K=e[35]),y.useLayoutEffect(L,K);let J;e[36]!==h||e[37]!==U||e[38]!==w||e[39]!==v?(J={activeResizer:h,drag:U,getPanelStyle:w,registerElement:j,startDragging:v,stopDragging:M,unregisterElement:S},e[36]=h,e[37]=U,e[38]=w,e[39]=v,e[40]=J):J=e[40];const X=J;let B;e[41]!==t?(B=u.jsx(mi,{ref:a,children:t}),e[41]=t,e[42]=B):B=e[42];let te;return e[43]!==X||e[44]!==B?(te=u.jsx(dr.Provider,{value:X,children:B}),e[43]=X,e[44]=B,e[45]=te):te=e[45],te};function hr(r){const e=z.c(37);let t,a,i,n,s;e[0]!==r?({children:t,message:a,onRetry:n,onContinueAnyway:i,...s}=r,e[0]=r,e[1]=t,e[2]=a,e[3]=i,e[4]=n,e[5]=s):(t=e[1],a=e[2],i=e[3],n=e[4],s=e[5]);const{t:o}=Te(ke);let c;e[6]!==o?(c=o("error-card.retry-button.text"),e[6]=o,e[7]=c):c=e[7];let l;e[8]!==n||e[9]!==c?(l=u.jsx(Oe,{mode:"ghost",onClick:n,text:c}),e[8]=n,e[9]=c,e[10]=l):l=e[10];const m=l;let p;e[11]!==o?(p=o("error-card.continue-button.text"),e[11]=o,e[12]=p):p=e[12];let h;e[13]!==i||e[14]!==p?(h=u.jsx(Oe,{mode:"ghost",tone:"critical",onClick:i,text:p}),e[13]=i,e[14]=p,e[15]=h):h=e[15];const d=h;let f;e[16]!==o?(f=o("error-card.title"),e[16]=o,e[17]=f):f=e[17];let g;e[18]!==f?(g=u.jsx(se,{size:1,weight:"semibold",children:f}),e[18]=f,e[19]=g):g=e[19];let x;e[20]!==a?(x=u.jsx(se,{muted:!0,size:1,children:a}),e[20]=a,e[21]=x):x=e[21];let w;e[22]!==g||e[23]!==x?(w=u.jsxs(He,{space:3,children:[g,x]}),e[22]=g,e[23]=x,e[24]=w):w=e[24];let b;e[25]!==d||e[26]!==i||e[27]!==n||e[28]!==m?(b=n&&i?u.jsxs(Fn,{space:2,children:[m,d]}):n?u.jsx(we,{children:m}):i?u.jsx(we,{children:d}):null,e[25]=d,e[26]=i,e[27]=n,e[28]=m,e[29]=b):b=e[29];let j;e[30]!==t||e[31]!==w||e[32]!==b?(j=u.jsx(le,{align:"center",height:"fill",justify:"center",children:u.jsx(Vn,{padding:4,sizing:"border",width:0,children:u.jsxs(He,{space:4,children:[w,t,b]})})}),e[30]=t,e[31]=w,e[32]=b,e[33]=j):j=e[33];let P;return e[34]!==s||e[35]!==j?(P=u.jsx(me,{height:"fill",...s,children:j}),e[34]=s,e[35]=j,e[36]=P):P=e[36],P}const sn=y.forwardRef(function(r,e){const t=z.c(17);let a,i,n,s,o;if(t[0]!==r){const{childId:p,childType:h,childPayload:d,childParameters:f,searchParams:g,...x}=r;a=p,n=h,i=f,o=g,s=x,t[0]=r,t[1]=a,t[2]=i,t[3]=n,t[4]=s,t[5]=o}else a=t[1],i=t[2],n=t[3],s=t[4],o=t[5];let c;t[6]!==i||t[7]!==o?(c=Object.entries({...o,...i}),t[6]=i,t[7]=o,t[8]=c):c=t[8];let l;t[9]!==a||t[10]!==n||t[11]!==c?(l={id:a,type:n,_searchParams:c},t[9]=a,t[10]=n,t[11]=c,t[12]=l):l=t[12];let m;return t[13]!==e||t[14]!==s||t[15]!==l?(m=u.jsx(pr,{...s,ref:e,state:l}),t[13]=e,t[14]=s,t[15]=l,t[16]=m):m=t[16],m}),fi=y.forwardRef(function(r,e){const t=z.c(24);let a,i,n,s,o,c;t[0]!==r?({documentId:a,documentType:i,parentRefPath:n,template:c,searchParams:o,...s}=r,t[0]=r,t[1]=a,t[2]=i,t[3]=n,t[4]=s,t[5]=o,t[6]=c):(a=t[1],i=t[2],n=t[3],s=t[4],o=t[5],c=t[6]);let l;t[7]!==a?(l=Pt(a),t[7]=a,t[8]=l):l=t[8];const m=c?.params;let p;t[9]!==n?(p=Bn(n),t[9]=n,t[10]=p):p=t[10];let h;t[11]!==c?(h=c&&{template:c?.id},t[11]=c,t[12]=h):h=t[12];let d;t[13]!==p||t[14]!==h?(d={parentRefPath:p,...h},t[13]=p,t[14]=h,t[15]=d):d=t[15];let f;return t[16]!==i||t[17]!==e||t[18]!==s||t[19]!==o||t[20]!==l||t[21]!==m||t[22]!==d?(f=u.jsx(sn,{...s,ref:e,childId:l,childType:i,childPayload:m,childParameters:d,searchParams:o}),t[16]=i,t[17]=e,t[18]=s,t[19]=o,t[20]=l,t[21]=m,t[22]=d,t[23]=f):f=t[23],f});function vi(r={}){const e=Object.entries(r).map(([t,a])=>`${t}=${a}`).join("&");return e.length?`?${e}`:""}function gi(r){const e=["comment","inspect","instruction","pathKey","rev","since","template","view"],t=Object.entries(r).filter(([a])=>e.includes(a)).reduce((a,[i,n])=>n==null?a:{...a,[i]:n},{});return vi(t)}const wi=y.forwardRef(function(r,e){const t=z.c(9);let a,i;t[0]!==r?({searchParams:i,...a}=r,t[0]=r,t[1]=a,t[2]=i):(a=t[1],i=t[2]);let n;t[3]!==i?(n={type:void 0,_searchParams:Object.entries(i)},t[3]=i,t[4]=n):n=t[4];let s;return t[5]!==e||t[6]!==a||t[7]!==n?(s=u.jsx(pr,{...a,ref:e,state:n,title:void 0}),t[5]=e,t[6]=a,t[7]=n,t[8]=s):s=t[8],s});function on(r){const e=z.c(28),{children:t,onEditReference:a,onStructureParams:i,structureParams:n,searchParams:s,refs:o}=r,{state:c,resolvePathFromState:l}=yt();let m;e[0]!==c._searchParams?(m=Object.fromEntries(c._searchParams||[]),e[0]=c._searchParams,e[1]=m):m=e[1];const p=Fr(m);let h;e[2]!==l||e[3]!==p||e[4]!==c?(h=R=>{const v=l(c),A=gi({...p,...R});return`${v}${A}`},e[2]=l,e[3]=p,e[4]=c,e[5]=h):h=e[5];const d=h;let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f={},e[6]=f):f=e[6];const g=n;let x;e[7]===Symbol.for("react.memo_cache_sentinel")?(x=[],e[7]=x):x=e[7];let w;e[8]!==o||e[9]!==s?(w=y.forwardRef(function(R,v){const{childId:A,...M}=R,k=o?.find(U=>U._id===A||Pt(U._id)===A);return k?u.jsx(sn,{...M,ref:v,childId:A,childType:k._type,searchParams:s}):(console.warn(`ChildLink: No document found for childId "${A}"`),null)}),e[8]=o,e[9]=s,e[10]=w):w=e[10];let b;e[11]!==s?(b=y.forwardRef(function(R,v){return u.jsx(wi,{...R,ref:v,searchParams:s})}),e[11]=s,e[12]=b):b=e[12];let j;e[13]!==s?(j=y.forwardRef(function(R,v){return u.jsx(fi,{...R,ref:v,searchParams:s})}),e[13]=s,e[14]=j):j=e[14];let P;e[15]!==a?(P=R=>{const{id:v,template:A,type:M,parentRefPath:k,version:U}=R;a({state:{id:v,type:M},params:{template:A.id,parentRefPath:va(k),version:U}})},e[15]=a,e[16]=P):P=e[16];let S;e[17]!==d||e[18]!==i||e[19]!==g||e[20]!==w||e[21]!==b||e[22]!==j||e[23]!==P?(S={index:0,groupIndex:0,siblingIndex:0,payload:f,params:g,hasGroupSiblings:!1,groupLength:1,routerPanesState:x,ChildLink:w,BackLink:b,ReferenceChildLink:j,ParameterizedLink:Ei,closeCurrentAndAfter:ji,handleEditReference:P,replaceCurrent:_i,closeCurrent:Si,duplicateCurrent:bi,setView:Pi,setParams:i,setPayload:xi,navigateIntent:yi,createPathWithParams:d},e[17]=d,e[18]=i,e[19]=g,e[20]=w,e[21]=b,e[22]=j,e[23]=P,e[24]=S):S=e[24];const E=S;let _;return e[25]!==t||e[26]!==E?(_=u.jsx(fa.Provider,{value:E,children:t}),e[25]=t,e[26]=E,e[27]=_):_=e[27],_}function yi(r,e,t){console.warn("navigateIntent",r,e,t)}function xi(r){console.warn("setPayload",r)}function Pi(r){console.warn("setView",r)}function bi(r){console.warn("duplicateCurrent",r)}function Si(){console.warn("closeCurrent")}function _i(r){console.warn("replaceCurrent",r)}function ji(){console.warn("closeCurrentAndAfter")}function Ei(){throw new Error("ParameterizedLink not implemented")}const Ri=ye(Jr)`
  height: 100%;
`,Ci=ye(le)`
  & > div {
    min-width: none !important;
    max-width: none !important;
  }
`,Ai=ye(Ut)`
  white-space: pre-wrap;
`;function Ti(r){const e=z.c(34),{mainDocumentState:t,onEditReference:a,onStructureParams:i,searchParams:n,refs:s}=r,{t:o}=Te(ke),{devMode:c}=lr();let l;if(e[0]!==t?.document?._id||e[1]!==s){let R;e[3]!==t?.document?._id?(R=v=>Pt(v._id)!==t?.document?._id,e[3]=t?.document?._id,e[4]=R):R=e[4],l=s.filter(R).map(Ii),e[0]=t?.document?._id,e[1]=s,e[2]=l}else l=e[2];const m=l;let p;e[5]!==m?(p={filter:"_id in $ids",params:{ids:m}},e[5]=m,e[6]=p):p=e[6];let h;e[7]!==o?(h=o("document-list-pane.document-list.title"),e[7]=o,e[8]=h):h=e[8];let d;e[9]!==p||e[10]!==h?(d={id:"$root",options:p,schemaTypeName:"",title:h,type:"documentList"},e[9]=p,e[10]=h,e[11]=d):d=e[11];const f=d,[g,x]=y.useState(null);let w;e[12]===Symbol.for("react.memo_cache_sentinel")?(w=()=>x(null),e[12]=w):w=e[12];const b=w,[j]=y.useState(ki);let P;e[13]===Symbol.for("react.memo_cache_sentinel")?(P=()=>x(null),e[13]=P):P=e[13];let S;if(e[14]!==s?(S=[s],e[14]=s,e[15]=S):S=e[15],y.useEffect(P,S),g){let R;e[16]!==o?(R=o("document-list-pane.error.text"),e[16]=o,e[17]=R):R=e[17];let v;e[18]!==c||e[19]!==g||e[20]!==o?(v=c&&u.jsx(me,{overflow:"auto",padding:3,radius:2,tone:"critical",children:u.jsxs(He,{space:3,children:[u.jsx(Mt,{muted:!0,size:0,children:o("presentation-error.label")}),u.jsx(Ai,{size:1,children:g.error.message})]})}),e[18]=c,e[19]=g,e[20]=o,e[21]=v):v=e[21];let A;return e[22]!==R||e[23]!==v?(A=u.jsx(hr,{flex:1,message:R,onRetry:b,children:v}),e[22]=R,e[23]=v,e[24]=A):A=e[24],A}let E;e[25]!==f?(E=u.jsx(Ci,{direction:"column",flex:1,children:u.jsx(ja,{index:0,itemId:"$root",pane:f,paneKey:"$root"})}),e[25]=f,e[26]=E):E=e[26];let _;return e[27]!==a||e[28]!==i||e[29]!==s||e[30]!==n||e[31]!==j||e[32]!==E?(_=u.jsx(Xr,{onCatch:x,children:u.jsx(Ri,{children:u.jsx(Qr,{children:u.jsx(on,{onEditReference:a,onStructureParams:i,structureParams:j,searchParams:n,refs:s,children:E})})})}),e[27]=a,e[28]=i,e[29]=s,e[30]=n,e[31]=j,e[32]=E,e[33]=_):_=e[33],_}function ki(){return{}}function Ii(r){return Pt(r._id)}const Mi=ye(Ut)`
  white-space: pre-wrap;
`;function Ui(r){const e=z.c(40),{documentId:t,documentType:a,onFocusPath:i,onEditReference:n,onStructureParams:s,searchParams:o,structureParams:c}=r,{template:l,templateParams:m}=c,{t:p}=Te(ke),{devMode:h}=lr();let d;e[0]!==m?(d=ha(m),e[0]=m,e[1]=d):d=e[1];let f;e[2]!==t||e[3]!==a||e[4]!==d||e[5]!==l?(f={id:t,type:a,template:l,templateParameters:d},e[2]=t,e[3]=a,e[4]=d,e[5]=l,e[6]=f):f=e[6];let g;e[7]!==t||e[8]!==f?(g={id:t,options:f,title:"",type:"document"},e[7]=t,e[8]=f,e[9]=g):g=e[9];const x=g;let w;e[10]!==t||e[11]!==a||e[12]!==i?(w=U=>i({id:t,type:a,path:Hr.toString(U)}),e[10]=t,e[11]=a,e[12]=i,e[13]=w):w=e[13];const b=w,[j,P]=y.useState(null);let S;e[14]===Symbol.for("react.memo_cache_sentinel")?(S=()=>P(null),e[14]=S):S=e[14];const E=S;let _;e[15]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{P(null)},e[15]=_):_=e[15];let R;if(e[16]!==t||e[17]!==a||e[18]!==c?(R=[t,a,c],e[16]=t,e[17]=a,e[18]=c,e[19]=R):R=e[19],y.useEffect(_,R),j){let U;e[20]!==p?(U=p("document-pane.error.text"),e[20]=p,e[21]=U):U=e[21];let O;e[22]!==h||e[23]!==j||e[24]!==p?(O=h&&u.jsx(me,{overflow:"auto",padding:3,radius:2,tone:"critical",children:u.jsxs(He,{space:3,children:[u.jsx(Mt,{muted:!0,size:0,children:p("presentation-error.label")}),u.jsx(Mi,{size:1,children:j.error.message})]})}),e[22]=h,e[23]=j,e[24]=p,e[25]=O):O=e[25];let T;return e[26]!==U||e[27]!==O?(T=u.jsx(hr,{flex:1,message:U,onRetry:E,children:O}),e[26]=U,e[27]=O,e[28]=T):T=e[28],T}let v;e[29]===Symbol.for("react.memo_cache_sentinel")?(v={height:"100%"},e[29]=v):v=e[29];let A;e[30]===Symbol.for("react.memo_cache_sentinel")?(A=u.jsx(Dr,{}),e[30]=A):A=e[30];let M;e[31]!==b||e[32]!==x?(M=u.jsx(y.Suspense,{fallback:A,children:u.jsx(ga,{paneKey:"document",index:1,itemId:"document",pane:x,onFocusPath:b})}),e[31]=b,e[32]=x,e[33]=M):M=e[33];let k;return e[34]!==n||e[35]!==s||e[36]!==o||e[37]!==c||e[38]!==M?(k=u.jsx(Xr,{onCatch:P,children:u.jsx(Jr,{style:v,children:u.jsx(on,{searchParams:o,onEditReference:n,onStructureParams:s,structureParams:c,children:M})})}),e[34]=n,e[35]=s,e[36]=o,e[37]=c,e[38]=M,e[39]=k):k=e[39],k}function $i(r){const e=z.c(8),{documentId:t,documentType:a,onFocusPath:i,onEditReference:n,onStructureParams:s,searchParams:o,structureParams:c}=r;let l;return e[0]!==t||e[1]!==a||e[2]!==n||e[3]!==i||e[4]!==s||e[5]!==o||e[6]!==c?(l=u.jsx(Qr,{children:u.jsx(Ui,{documentId:t,documentType:a,onEditReference:n,onFocusPath:i,onStructureParams:s,searchParams:o,structureParams:c})}),e[0]=t,e[1]=a,e[2]=n,e[3]=i,e[4]=s,e[5]=o,e[6]=c,e[7]=l):l=e[7],l}function Di(r,e){const t=z.c(7),a=ma();let i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={},t[0]=i):i=t[0];const[n,s]=y.useState(i),{perspectiveStack:o}=Vr();let c,l;return t[1]!==r||t[2]!==a||t[3]!==o||t[4]!==e?(c=()=>{if(!e)return;const m=wa(a,e,r,o).subscribe(p=>{s(p)});return()=>{m?.unsubscribe()}},l=[a,e,r,o],t[1]=r,t[2]=a,t[3]=o,t[4]=e,t[5]=c,t[6]=l):(c=t[5],l=t[6]),y.useEffect(c,l),n}function Li(r){const e=z.c(40),{documentId:t,documentType:a,mainDocumentState:i,onEditReference:n,onFocusPath:s,onStructureParams:o,refs:c,searchParams:l,structureParams:m}=r,{t:p}=Te(ke),h=Yn();let d;e[0]!==i?.document?._id||e[1]!==i?.document?._type||e[2]!==l?(d=_=>u.jsx(pr,{..._,state:{id:i?.document?._id,type:i?.document?._type,_searchParams:Object.entries(l)}}),e[0]=i?.document?._id,e[1]=i?.document?._type,e[2]=l,e[3]=d):d=e[3];const f=d;let g;e[4]!==i?.document?._type||e[5]!==h?(g=h.get(i?.document?._type||"shoe"),e[4]=i?.document?._type,e[5]=h,e[6]=g):g=e[6];const x=g,w=Di(i?.document?._id||"",x);let b;e:{if(!i?.document){b=null;break e}let _;e[7]!==i.document||e[8]!==w.snapshot?(_=Zn({snapshot:w.snapshot,fallback:i.document}),e[7]=i.document,e[8]=w.snapshot,e[9]=_):_=e[9];let R;e[10]!==p?(R=p("main-document.label"),e[10]=p,e[11]=R):R=e[11];let v;e[12]!==R?(v=u.jsx(me,{padding:1,radius:2,shadow:1,children:u.jsx(se,{muted:!0,size:0,weight:"medium",children:R})}),e[12]=R,e[13]=v):v=e[13];let A;e[14]!==x||e[15]!==_||e[16]!==v?(A=u.jsx(ea,{..._,schemaType:x,status:v}),e[14]=x,e[15]=_,e[16]=v,e[17]=A):A=e[17],b=A}const j=b;if(t&&a){let _;return e[18]!==t||e[19]!==a||e[20]!==n||e[21]!==s||e[22]!==o||e[23]!==l||e[24]!==m?(_=u.jsx($i,{documentId:t,documentType:a,onEditReference:n,onFocusPath:s,onStructureParams:o,searchParams:l,structureParams:m}),e[18]=t,e[19]=a,e[20]=n,e[21]=s,e[22]=o,e[23]=l,e[24]=m,e[25]=_):_=e[25],_}let P;e[26]!==f||e[27]!==i||e[28]!==j||e[29]!==p?(P=i&&u.jsx(me,{padding:3,tone:i.document?"inherit":"caution",children:i.document?u.jsx(ta,{__unstable_focusRing:!0,as:f,"data-as":"a",radius:2,sizing:"border",tone:"inherit",children:j}):u.jsx(me,{padding:2,radius:2,tone:"inherit",children:u.jsxs(le,{gap:3,children:[u.jsx(we,{flex:"none",children:u.jsx(se,{size:1,children:u.jsx(ra,{})})}),u.jsx(we,{flex:1,children:u.jsx(se,{size:1,children:u.jsx(ur,{t:p,i18nKey:"main-document.missing.text",components:{Code:"code"},values:{path:i.path}})})})]})})}),e[26]=f,e[27]=i,e[28]=j,e[29]=p,e[30]=P):P=e[30];let S;e[31]!==i||e[32]!==n||e[33]!==o||e[34]!==c||e[35]!==l?(S=u.jsx(Ti,{mainDocumentState:i,onEditReference:n,onStructureParams:o,searchParams:l,refs:c}),e[31]=i,e[32]=n,e[33]=o,e[34]=c,e[35]=l,e[36]=S):S=e[36];let E;return e[37]!==P||e[38]!==S?(E=u.jsxs(le,{direction:"column",flex:1,height:"fill",children:[P,S]}),e[37]=P,e[38]=S,e[39]=E):E=e[39],E}function Oi(r){const e=z.c(2);let t;e[0]!==r?(t=()=>r||Oa(),e[0]=r,e[1]=t):t=e[1];const[a]=y.useState(t);return a}const zi=ye.div`
  position: relative;
`,Ni=ye.div`
  position: absolute;
  top: 0;
  bottom: 0;
  left: -5px;
  width: 9px;
  z-index: 10;
  cursor: ${({$disabled:r})=>r?"auto":"ew-resize"};

  /* Border */
  & > span:nth-child(1) {
    display: block;
    border-left: 1px solid var(--card-border-color);
    position: absolute;
    top: 0;
    left: 4px;
    bottom: 0;
    transition: opacity 200ms;
  }

  ${({$disabled:r})=>!r&&`
    /* Hover effect */
    & > span:nth-child(2) {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    @media (hover: hover) {
      &:hover > span:nth-child(2) {
        opacity: 0.2;
      }
    }
  `}
`,cn=function(r){const e=z.c(27),{id:t,order:a,disabled:i}=r,n=i===void 0?!1:i,s=y.useRef(null),o=y.useContext(dr);if(o===null)throw Error("Panel components must be rendered within a PanelGroup container");const c=Oi(t),{activeResizer:l,drag:m,startDragging:p,stopDragging:h,registerElement:d,unregisterElement:f}=o,g=l===c;if(o===null)throw Error("Panel components must be rendered within a PanelGroup container");let x;e[0]!==c||e[1]!==p?(x=O=>{p(c,O.nativeEvent)},e[0]=c,e[1]=p,e[2]=x):x=e[2];const w=x;let b;e[3]!==m||e[4]!==c?(b=O=>{m(c,O)},e[3]=m,e[4]=c,e[5]=b):b=e[5];const j=b;let P;e[6]!==h?(P=()=>{s.current.blur(),h()},e[6]=h,e[7]=P):P=e[7];const S=P;let E,_;e[8]!==n||e[9]!==g||e[10]!==j||e[11]!==S?(E=()=>{if(!g||n)return;const O=(function(){const T=document.body.style,W=document.documentElement.style,{cursor:C}=W,{userSelect:V}=T;return W.cursor="ew-resize",T.userSelect="none",()=>{C?W.cursor=C:W.removeProperty("cursor"),V?T.userSelect=V:T.removeProperty("user-select")}})();return window.addEventListener("mousemove",j),window.addEventListener("mouseup",S),window.addEventListener("contextmenu",S),()=>{O(),window.removeEventListener("mousemove",j),window.removeEventListener("mouseup",S),window.removeEventListener("contextmenu",S)}},_=[n,g,j,S],e[8]=n,e[9]=g,e[10]=j,e[11]=S,e[12]=E,e[13]=_):(E=e[12],_=e[13]),y.useEffect(E,_);let R,v;e[14]!==c||e[15]!==a||e[16]!==d||e[17]!==f?(R=()=>(d(c,{id:c,order:a,type:"resizer",el:s}),()=>{f(c)}),v=[c,a,d,f],e[14]=c,e[15]=a,e[16]=d,e[17]=f,e[18]=R,e[19]=v):(R=e[18],v=e[19]),y.useLayoutEffect(R,v);let A,M;e[20]===Symbol.for("react.memo_cache_sentinel")?(M=u.jsx("span",{}),A=u.jsx("span",{}),e[20]=A,e[21]=M):(A=e[20],M=e[21]);let k;e[22]!==n?(k=u.jsxs(Ni,{$disabled:n,children:[M,A]}),e[22]=n,e[23]=k):k=e[23];let U;return e[24]!==w||e[25]!==k?(U=u.jsx(zi,{onMouseDown:w,ref:s,children:k}),e[24]=w,e[25]=k,e[26]=U):U=e[26],U},Wi=r=>{const e=z.c(8),{documentId:t,setDisplayedDocument:a,getCommentIntent:i}=r;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=u.jsx(cn,{order:4}),e[0]=n):n=e[0];let s;e[1]!==i||e[2]!==r.children?(s=u.jsx(On,{getIntent:i,children:r.children}),e[1]=i,e[2]=r.children,e[3]=s):s=e[3];let o;return e[4]!==t||e[5]!==a||e[6]!==s?(o=u.jsxs(u.Fragment,{children:[n,u.jsx(mr,{id:"content",minWidth:325,order:5,children:u.jsx(Ea,{documentId:t,setDisplayedDocument:a,children:s})})]}),e[4]=t,e[5]=a,e[6]=s,e[7]=o):o=e[7],o},Fi=r=>{const e=z.c(15),{documentId:t,documentsOnPage:a,documentType:i,getCommentIntent:n,mainDocumentState:s,onEditReference:o,onFocusPath:c,onStructureParams:l,searchParams:m,setDisplayedDocument:p,structureParams:h}=r;let d;e[0]!==t||e[1]!==i||e[2]!==a||e[3]!==s||e[4]!==o||e[5]!==c||e[6]!==l||e[7]!==m||e[8]!==h?(d=u.jsx(Li,{documentId:t,documentType:i,mainDocumentState:s,onEditReference:o,onFocusPath:c,onStructureParams:l,refs:a,searchParams:m,structureParams:h}),e[0]=t,e[1]=i,e[2]=a,e[3]=s,e[4]=o,e[5]=c,e[6]=l,e[7]=m,e[8]=h,e[9]=d):d=e[9];let f;return e[10]!==t||e[11]!==n||e[12]!==p||e[13]!==d?(f=u.jsx(Wi,{documentId:t,getCommentIntent:n,setDisplayedDocument:p,children:d}),e[10]=t,e[11]=n,e[12]=p,e[13]=d,e[14]=f):f=e[14],f},Vi=function(r){const e=z.c(5),{children:t,navigate:a}=r;let i;e[0]!==a?(i=(o,c)=>{if(o||c){const l={};o&&(l.params={preview:o}),c&&(l.state=c),a(l)}},e[0]=a,e[1]=i):i=e[1];const n=i;let s;return e[2]!==t||e[3]!==n?(s=u.jsx(da.Provider,{value:n,children:t}),e[2]=t,e[3]=n,e[4]=s):s=e[4],s};function Bi(r,e){const t=z.c(9);let a;t[0]!==e||t[1]!==r?(a=()=>JSON.parse(localStorage.getItem(r)??JSON.stringify(e)),t[0]=e,t[1]=r,t[2]=a):a=t[2];const[i,n]=y.useState(a);let s,o;t[3]!==r||t[4]!==i?(s=()=>{localStorage.setItem(r,JSON.stringify(i))},o=[r,i],t[3]=r,t[4]=i,t[5]=s,t[6]=o):(s=t[5],o=t[6]),y.useEffect(s,o);let c;return t[7]!==i?(c=[i,n],t[7]=i,t[8]=c):c=t[8],c}function Ki(r){const e=z.c(11),{unstable_navigator:t}=r,a=!!t?.component,[i,n]=Bi("presentation/navigator",a),s=a?i:!1;let o;e:{if(!a){o=void 0;break e}let d;e[0]!==n?(d=()=>n(Hi),e[0]=n,e[1]=d):d=e[1],o=d}const c=o;let l;e[2]!==s||e[3]!==t?(l=function(){return u.jsx(u.Fragment,{children:s&&u.jsx(qi,{...t})})},e[2]=s,e[3]=t,e[4]=l):l=e[4];const m=l;let p;e[5]!==s||e[6]!==c?(p={navigatorEnabled:s,toggleNavigator:c},e[5]=s,e[6]=c,e[7]=p):p=e[7];let h;return e[8]!==m||e[9]!==p?(h=[p,m],e[8]=m,e[9]=p,e[10]=h):h=e[10],h}function Hi(r){return!r}function Gi(r){const e=z.c(11),{minWidth:t,maxWidth:a,component:i}=r,n=t!=null&&a!=null&&t===a;let s;e[0]!==i?(s=u.jsx(i,{}),e[0]=i,e[1]=s):s=e[1];let o;e[2]!==a||e[3]!==t||e[4]!==s?(o=u.jsx(mr,{id:"navigator",minWidth:t,maxWidth:a,order:1,children:s}),e[2]=a,e[3]=t,e[4]=s,e[5]=o):o=e[5];let c;e[6]!==n?(c=u.jsx(cn,{order:2,disabled:n}),e[6]=n,e[7]=c):c=e[7];let l;return e[8]!==o||e[9]!==c?(l=u.jsxs(u.Fragment,{children:[o,c]}),e[8]=o,e[9]=c,e[10]=l):l=e[10],l}const qi=y.memo(Gi),Qi=function(r){const e=z.c(3),{children:t,params:a}=r,i=a;let n;return e[0]!==t||e[1]!==i?(n=u.jsx(ua.Provider,{value:i,children:t}),e[0]=t,e[1]=i,e[2]=n):n=e[2],n},Xi=function(r){const e=z.c(10),{children:t,devMode:a,name:i,navigate:n,params:s,searchParams:o,structureParams:c}=r;let l;e[0]!==a||e[1]!==i||e[2]!==n||e[3]!==s||e[4]!==o||e[5]!==c?(l={devMode:a,name:i,navigate:n,params:s,searchParams:o,structureParams:c},e[0]=a,e[1]=i,e[2]=n,e[3]=s,e[4]=o,e[5]=c,e[6]=l):l=e[6];const m=l;let p;return e[7]!==t||e[8]!==m?(p=u.jsx(pa.Provider,{value:m,children:t}),e[7]=t,e[8]=m,e[9]=p):p=e[9],p};function fr(r){const e=ae(r,Ji);if(!Array.isArray(e))throw new TypeError("allowPatterns must be an array");return e}function Ji(r){return r.context.allowOrigins}function mt(r){return Array.isArray(r)?r.join(","):r}function ln(){const r=z.c(2),e=y.useId();let t;return r[0]!==e?(t=e.startsWith(":")?e.replace(/^:(.+):$/,"«$1»"):e,r[0]=e,r[1]=t):t=r[1],t}const Yi=y.forwardRef(function(r,e){const t=z.c(19),{animate:a,initial:i,onLoad:n,preventClick:s,src:o,variants:c,style:l}=r,m=y.useRef(null);let p;t[0]===Symbol.for("react.memo_cache_sentinel")?(p=()=>m.current,t[0]=p):p=t[0],y.useImperativeHandle(e,p);let h,d;t[1]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{if(!m.current)return;const P=m.current,S=function(){P===document.activeElement&&P.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0}))};return window.addEventListener("blur",S),()=>{window.removeEventListener("blur",S)}},d=[],t[1]=h,t[2]=d):(h=t[1],d=t[2]),y.useEffect(h,d);const f=ln();let g;t[3]!==l||t[4]!==f?(g={...l,viewTransitionName:f},t[3]=l,t[4]=f,t[5]=g):g=t[5];let x;t[6]!==a||t[7]!==i||t[8]!==n||t[9]!==o||t[10]!==g||t[11]!==c?(x=u.jsx(Zi,{style:g,animate:a,initial:i,onLoad:n,ref:m,src:o,variants:c}),t[6]=a,t[7]=i,t[8]=n,t[9]=o,t[10]=g,t[11]=c,t[12]=x):x=t[12];let w;t[13]!==s?(w=s&&u.jsx(es,{}),t[13]=s,t[14]=w):w=t[14];let b;t[15]===Symbol.for("react.memo_cache_sentinel")?(b=u.jsx(ts,{}),t[15]=b):b=t[15];let j;return t[16]!==x||t[17]!==w?(j=u.jsxs(u.Fragment,{children:[x,w,b]}),t[16]=x,t[17]=w,t[18]=j):j=t[18],j}),Zi=xt.create(ye.iframe`
  box-shadow: 0 0 0 1px var(--card-border-color);
  border: 0;
  max-height: 100%;
  width: 100%;
  view-transition-class: presentation-tool-iframe;
`),es=ye(we)`
  position: absolute;
  inset: 0;
  background: transparent;
`,ts=Kn`
html:active-view-transition-type(sanity-iframe-viewport) {
  view-transition-name: none;
  &::view-transition {
    pointer-events: none;
  }
  /* &::view-transition-old(root) {
    display: none;
  }
  &::view-transition-new(root) {
    animation: none;
  } */
}
`;function rs(r){const e=z.c(21),{openPopup:t,previewLocationOrigin:a,previewLocationRoute:i,perspective:n,targetOrigin:s}=r;let o;e[0]!==n||e[1]!==a||e[2]!==i||e[3]!==s?(o=new URL(i,a||s),o.searchParams.set(pt,mt(n)),e[0]=n,e[1]=a,e[2]=i,e[3]=s,e[4]=o):o=e[4];const{pathname:c,search:l}=o,m=`${a}${c}${l}`,{t:p}=Te(ke);let h;e[5]!==t?(h=P=>{P.preventDefault(),t(P.currentTarget.href)},e[5]=t,e[6]=h):h=e[6];const d=h;let f;e[7]!==p?(f=p("share-url.menu-item.open.text"),e[7]=p,e[8]=f):f=e[8];let g;e[9]!==f?(g=u.jsx(se,{size:1,children:f}),e[9]=f,e[10]=g):g=e[10];let x;e[11]===Symbol.for("react.memo_cache_sentinel")?(x=["bottom-start"],e[11]=x):x=e[11];let w;e[12]!==p?(w=p("share-url.menu-item.open.text"),e[12]=p,e[13]=w):w=e[13];let b;e[14]!==d||e[15]!==m||e[16]!==w?(b=u.jsx(Oe,{as:"a","aria-label":w,icon:ya,mode:"bleed",href:m,rel:"opener",target:"_blank",tooltipProps:null,onClick:d}),e[14]=d,e[15]=m,e[16]=w,e[17]=b):b=e[17];let j;return e[18]!==g||e[19]!==b?(j=u.jsx(gt,{animate:!0,content:g,fallbackPlacements:x,placement:"bottom",portal:!0,children:b}),e[18]=g,e[19]=b,e[20]=j):j=e[20],j}function un(r){const e=ae(r,ns);if(!e)throw new TypeError("targetOrigin is required");return e}function ns(r){return r.context.previewUrl?.origin}function as(r){const e=z.c(32),{fontSize:t,onChange:a,padding:i,prefix:n,suffix:s,value:o,previewUrlRef:c}=r,l=t===void 0?1:t,m=i===void 0?3:i,p=fr(c),h=un(c),{t:d}=Te(ke),{basePath:f}=Or()?.activeWorkspace||{},g=f===void 0?"/":f,x=y.useRef(null),[w,b]=y.useState(void 0),[j,P]=y.useState(void 0);let S;e[0]===Symbol.for("react.memo_cache_sentinel")?(S=G=>{b(G.currentTarget.value)},e[0]=S):S=e[0];const E=S;let _;e[1]!==p||e[2]!==g||e[3]!==a||e[4]!==w||e[5]!==d||e[6]!==h?(_=G=>{if(G.key==="Enter"){if(w===void 0)return;let L=w;try{L=new URL(w,h).toString()}catch{}if(Array.isArray(p)){if(!p.some(J=>J.test(L))){P(d("preview-location-input.error",{origin:h,context:"origin-not-allowed"})),G.currentTarget.reportValidity();return}}else if(!h&&(L.startsWith(`${g}/`)||L===g)){P(d("preview-location-input.error",{basePath:g,context:"same-base-path"}));return}const K=L===h?`${h}/`:L;P(void 0),b(void 0),a(K),x.current?.blur()}G.key==="Escape"&&(P(void 0),b(void 0))},e[1]=p,e[2]=g,e[3]=a,e[4]=w,e[5]=d,e[6]=h,e[7]=_):_=e[7];const R=_;let v;e[8]===Symbol.for("react.memo_cache_sentinel")?(v=()=>{P(void 0),b(void 0)},e[8]=v):v=e[8];const A=v;let M;e[9]!==h||e[10]!==o?(M=()=>{P(void 0);let G=o;try{G=new URL(o,h).toString()}catch{}b(G)},e[9]=h,e[10]=o,e[11]=M):M=e[11];const k=M;let U;e[12]===Symbol.for("react.memo_cache_sentinel")?(U=()=>{P(void 0),b(void 0)},e[12]=U):U=e[12];let O;e[13]!==h||e[14]!==o?(O=[h,o],e[13]=h,e[14]=o,e[15]=O):O=e[15],y.useEffect(U,O);let T;e[16]===Symbol.for("react.memo_cache_sentinel")?(T={icon:xa},e[16]=T):T=e[16];const W=j?T:void 0;let C;e[17]===Symbol.for("react.memo_cache_sentinel")?(C={zIndex:1},e[17]=C):C=e[17];let V;e[18]!==w||e[19]!==h||e[20]!==o?(V=w===void 0?new URL(o,h).toString():w,e[18]=w,e[19]=h,e[20]=o,e[21]=V):V=e[21];let N;return e[22]!==j||e[23]!==l||e[24]!==k||e[25]!==R||e[26]!==m||e[27]!==n||e[28]!==s||e[29]!==W||e[30]!==V?(N=u.jsx(u.Fragment,{children:u.jsx(na,{clearButton:W,customValidity:j,fontSize:l,onBlur:A,onClear:k,onChange:E,onKeyDownCapture:R,padding:m,prefix:n,style:C,radius:2,ref:x,space:m,suffix:s,value:V})}),e[22]=j,e[23]=l,e[24]=k,e[25]=R,e[26]=m,e[27]=n,e[28]=s,e[29]=W,e[30]=V,e[31]=N):N=e[31],N}const is=y.lazy(()=>ze(()=>import("./QRCodeSVG-DLnZTNy8.js"),__vite__mapDeps([0,1]))),rr=24,ss=16,os=224,cs=ye(Pa)`
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: ${rr}px;
  width: ${rr}px;
`,ls=xt.create(It),us=xt.create(se),ds=xt.create(cs);function ps(r){const e=z.c(47),{canToggleSharePreviewAccess:t,canUseSharedPreviewAccess:a,initialUrl:i,previewLocationRoute:n,perspective:s}=r,{t:o}=Te(ke),{push:c}=Lt();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={apiVersion:Ot},e[0]=l):l=e[0];const m=Dt(l),p=Lr(),[h,d]=y.useState(!0),[f,g]=y.useState(!1),[x,w]=y.useState(!1),[b,j]=y.useState(null),P=f||x||h;let S;e[1]!==i||e[2]!==s||e[3]!==n||e[4]!==b?(S=b?Na(i,b,n,mt(s)):null,e[1]=i,e[2]=s,e[3]=n,e[4]=b,e[5]=S):S=e[5];const E=S,[_,R]=y.useState(null);if(_)throw _;let v;e[6]!==c||e[7]!==o?(v=()=>{c({closable:!0,status:"warning",title:o("share-preview-menu.error_toggle-sharing",{context:"toggle-sharing"})})},e[6]=c,e[7]=o,e[8]=v):v=e[8];const A=v;let M;e[9]!==m||e[10]!==p?.id?(M=async()=>{const $=async()=>{w(!0),await Fa(m,"sanity/presentation",typeof window>"u"?"":location.href,p?.id),j(null)};try{await $()}catch(F){R(F)}w(!1)},e[9]=m,e[10]=p?.id,e[11]=M):M=e[11];const k=M;let U;e[12]!==m||e[13]!==p?.id?(U=async()=>{const $=async()=>{g(!0);const F=await Wa(m,"sanity/presentation",typeof window>"u"?"":location.href,p?.id);j(F.secret)};try{await $()}catch(F){R(F)}g(!1)},e[12]=m,e[13]=p?.id,e[14]=U):U=e[14];const O=U;let T;e[15]!==c||e[16]!==o||e[17]!==E?(T=async()=>{const $=async()=>{if(!E)throw new Error("No URL to copy");await navigator.clipboard.writeText(E.toString()),c({closable:!0,status:"success",title:o("share-url.clipboard.status",{context:"success"})})};try{await $()}catch(F){R(F)}},e[15]=c,e[16]=o,e[17]=E,e[18]=T):T=e[18];const W=T;let C,V;e[19]!==m?(C=()=>{let $=new AbortController,F=[];const H=async function(Y,re){const{result:I,syncTags:q}=await m.fetch(qr,{},{filterResponse:!1,lastLiveEventId:Y,tag:"presentation.fetch-shared-access-secret"});Array.isArray(q)&&(F=q),re.aborted||j(I)},ee=m.live.events().subscribe({next:Y=>{Y.type==="message"&&($.abort(),$=new AbortController,Y.tags.some(re=>F.includes(re))&&H(Y.id,$.signal))},error:R});return H(null,$.signal).finally(()=>d(!1)),()=>{ee.unsubscribe(),$.abort()}},V=[m],e[19]=m,e[20]=C,e[21]=V):(C=e[20],V=e[21]),y.useEffect(C,V);let N;e[22]!==o?(N=o("preview-frame.share-button.aria-label"),e[22]=o,e[23]=N):N=e[23];let G;e[24]!==N?(G=u.jsx(Oe,{"aria-label":N,icon:ba,mode:"bleed",tooltipProps:null}),e[24]=N,e[25]=G):G=e[25];let L;e[26]===Symbol.for("react.memo_cache_sentinel")?(L={maxWidth:248},e[26]=L):L=e[26];const K=a?void 0:0;let J;e[27]!==P||e[28]!==t||e[29]!==a||e[30]!==x||e[31]!==f||e[32]!==W||e[33]!==k||e[34]!==O||e[35]!==A||e[36]!==h||e[37]!==o||e[38]!==E?(J=a?u.jsxs(u.Fragment,{children:[u.jsx("label",{style:{cursor:"pointer"},children:u.jsxs(aa,{columns:2,rows:2,gapX:3,gapY:1,style:{justifyContent:"center",alignItems:"center",gridTemplateColumns:"min-content 1fr",gridTemplateRows:"min-content"},paddingTop:3,paddingX:3,children:[u.jsx(gt,{animate:!0,content:u.jsx(se,{size:1,children:o("share-preview-menu.toggle-button.tooltip",{context:E?"disable":"enable"})}),fallbackPlacements:["bottom-start"],placement:"bottom",portal:!0,children:u.jsx(Gr,{checked:f||E!==null&&!x,readOnly:f||x,indeterminate:h,onChange:t?E?k:O:A})}),u.jsx(se,{size:1,weight:"medium",children:o("share-preview-menu.toggle-button.label",{context:"first-line"})}),u.jsx("span",{}),u.jsx(se,{muted:!0,size:1,children:o("share-preview-menu.toggle-button.label",{context:"second-line"})})]})}),u.jsx(we,{padding:3,paddingTop:2,children:u.jsxs(He,{space:3,children:[u.jsx(me,{tone:P||!E?"transparent":void 0,style:{position:"relative",aspectRatio:"1 / 1",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Kr,{children:P?u.jsx(ls,{muted:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}):E?u.jsx(u.Fragment,{children:u.jsxs(y.Suspense,{fallback:u.jsx(It,{}),children:[u.jsx(is,{title:o("share-preview-menu.qr-code.title",{url:E.toString()}),value:E.toString(),size:os,color:"var(--card-fg-color)",logoSize:rr+ss}),u.jsx(ds,{initial:{opacity:-.5},animate:{opacity:1.5},exit:{opacity:0}})]})}):u.jsx(us,{muted:!0,size:1,style:{maxWidth:"100px",textWrap:"pretty",textAlign:"center"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o("share-preview-menu.qr-code.placeholder")})})}),u.jsx(se,{muted:!0,size:1,children:o("share-preview-menu.qr-code.instructions")})]})}),u.jsx(ia,{}),u.jsx(sa,{disabled:!E||x,icon:oa,onClick:W,text:o("share-preview-menu.copy-url.text")})]}):u.jsx(me,{padding:2,tone:"caution",radius:3,children:u.jsx(se,{style:{textWrap:"pretty"},children:o("share-preview-menu.error",{context:"missing-grants"})})}),e[27]=P,e[28]=t,e[29]=a,e[30]=x,e[31]=f,e[32]=W,e[33]=k,e[34]=O,e[35]=A,e[36]=h,e[37]=o,e[38]=E,e[39]=J):J=e[39];let X;e[40]!==K||e[41]!==J?(X=u.jsx(Sa,{style:L,padding:K,children:J}),e[40]=K,e[41]=J,e[42]=X):X=e[42];let B;e[43]===Symbol.for("react.memo_cache_sentinel")?(B={constrainSize:!0,placement:"bottom",portal:!0},e[43]=B):B=e[43];let te;return e[44]!==X||e[45]!==G?(te=u.jsx(ca,{button:G,id:"share-menu",menu:X,popover:B}),e[44]=X,e[45]=G,e[46]=te):te=e[46],te}const ms=r=>{const e=z.c(110),{canSharePreviewAccess:t,canToggleSharePreviewAccess:a,canUseSharedPreviewAccess:i,iframeRef:n,initialUrl:s,navigatorEnabled:o,onPathChange:c,onRefresh:l,openPopup:m,overlaysConnection:p,presentationRef:h,perspective:d,previewUrl:f,setViewport:g,targetOrigin:x,toggleNavigator:w,toggleOverlay:b,viewport:j,previewUrlRef:P}=r,{t:S}=Te(ke);let E;e[0]!==g||e[1]!==j?(E=()=>g(j==="desktop"?"mobile":"desktop"),e[0]=g,e[1]=j,e[2]=E):E=e[2];const _=E,R=x===location.origin?"":x;let v;e[3]!==n||e[4]!==l||e[5]!==h||e[6]!==f||e[7]!==x?(v=()=>{l(()=>{n.current&&(h.send({type:"iframe reload"}),Object.assign(n.current,{src:new URL(f||"/",x).toString()}))})},e[3]=n,e[4]=l,e[5]=h,e[6]=f,e[7]=x,e[8]=v):v=e[8];const A=v,M=ae(h,vs),k=ae(h,gs),U=ae(h,ws),O=ae(h,ys),T=ae(h,xs);let W;if(e[9]!==f||e[10]!==x){const ht=new URL(f||"/",x);W=za(ht),e[9]=f,e[10]=x,e[11]=W}else W=e[11];const{pathname:C,search:V}=W,N=`${C}${V}`,G=ln(),L=ae(P,Ps);let K;e[12]===Symbol.for("react.memo_cache_sentinel")?(K={width:"100%"},e[12]=K):K=e[12];let J;e[13]!==o||e[14]!==S||e[15]!==w?(J=w&&u.jsx(Oe,{"aria-label":S("preview-frame.navigator.toggle-button.aria-label"),icon:zn,mode:"bleed",onClick:w,selected:o,tooltipProps:{content:u.jsx(se,{size:1,children:S("preview-frame.navigator.toggle-button.tooltip")}),fallbackPlacements:["bottom-start"],placement:"bottom"}}),e[13]=o,e[14]=S,e[15]=w,e[16]=J):J=e[16];let X;e[17]===Symbol.for("react.memo_cache_sentinel")?(X={whiteSpace:"nowrap"},e[17]=X):X=e[17];const B=T?"disable":"enable";let te;e[18]!==S||e[19]!==B?(te=S("preview-frame.overlay.toggle-button.tooltip",{context:B}),e[18]=S,e[19]=B,e[20]=te):te=e[20];let $;e[21]!==te?($=u.jsx(we,{padding:1,children:u.jsx(se,{size:1,children:te})}),e[21]=te,e[22]=$):$=e[22];let F;e[23]===Symbol.for("react.memo_cache_sentinel")?(F=u.jsx(we,{paddingY:1,children:u.jsx(Hn,{keys:["Alt"],style:{marginTop:-4,marginBottom:-4}})}),e[23]=F):F=e[23];let H;e[24]!==$?(H=u.jsxs(le,{align:"center",style:X,children:[$,F]}),e[24]=$,e[25]=H):H=e[25];let ee;e[26]===Symbol.for("react.memo_cache_sentinel")?(ee=["bottom-start"],e[26]=ee):ee=e[26];let Y;e[27]===Symbol.for("react.memo_cache_sentinel")?(Y={lineHeight:0,borderRadius:999,userSelect:"none"},e[27]=Y):Y=e[27];const re=T?"transparent":void 0;let I;e[28]===Symbol.for("react.memo_cache_sentinel")?(I={margin:-4},e[28]=I):I=e[28];const q=!k,Q=M||p!=="connected";let oe;e[29]!==T||e[30]!==q||e[31]!==Q||e[32]!==b?(oe=u.jsx("div",{style:I,children:u.jsx(Gr,{indeterminate:q,checked:T,onChange:b,disabled:Q})}),e[29]=T,e[30]=q,e[31]=Q,e[32]=b,e[33]=oe):oe=e[33];const xe=!T;let he;e[34]!==S?(he=S("preview-frame.overlay.toggle-button.text"),e[34]=S,e[35]=he):he=e[35];let fe;e[36]!==xe||e[37]!==he?(fe=u.jsx(we,{children:u.jsx(se,{muted:xe,size:1,weight:"medium",children:he})}),e[36]=xe,e[37]=he,e[38]=fe):fe=e[38];let de;e[39]!==oe||e[40]!==fe?(de=u.jsxs(le,{align:"center",gap:3,children:[oe,fe]}),e[39]=oe,e[40]=fe,e[41]=de):de=e[41];let ve;e[42]!==re||e[43]!==de?(ve=u.jsx(me,{as:"label",flex:"none",padding:3,marginX:1,style:Y,tone:re,children:de}),e[42]=re,e[43]=de,e[44]=ve):ve=e[44];let pe;e[45]!==H||e[46]!==ve?(pe=u.jsx(gt,{animate:!0,content:H,fallbackPlacements:ee,placement:"bottom",portal:!0,children:ve}),e[45]=H,e[46]=ve,e[47]=pe):pe=e[47];let $e;e[48]!==k||e[49]!==M||e[50]!==U||e[51]!==O||e[52]!==S?($e=k?S("preview-frame.refresh-button.tooltip"):S("preview-frame.status",{context:M?"loading":U?"refreshing":O?"reloading":"unknown"}),e[48]=k,e[49]=M,e[50]=U,e[51]=O,e[52]=S,e[53]=$e):$e=e[53];let Pe;e[54]!==$e?(Pe=u.jsx(se,{size:1,children:$e}),e[54]=$e,e[55]=Pe):Pe=e[55];let De;e[56]===Symbol.for("react.memo_cache_sentinel")?(De=["bottom-end"],e[56]=De):De=e[56];let be;e[57]!==S?(be=S("preview-frame.refresh-button.aria-label"),e[57]=S,e[58]=be):be=e[58];const Ne=O||U||L;let Se;e[59]!==A||e[60]!==be||e[61]!==Ne?(Se=u.jsx(Oe,{"aria-label":be,icon:Gn,mode:"bleed",loading:Ne,onClick:A,tooltipProps:null}),e[59]=A,e[60]=be,e[61]=Ne,e[62]=Se):Se=e[62];let Ie;e[63]!==Pe||e[64]!==Se?(Ie=u.jsx(we,{padding:1,children:u.jsx(gt,{animate:!0,content:Pe,fallbackPlacements:De,placement:"bottom",portal:!0,children:Se})}),e[63]=Pe,e[64]=Se,e[65]=Ie):Ie=e[65];let _e;e[66]!==m||e[67]!==d||e[68]!==R||e[69]!==N||e[70]!==x?(_e=u.jsx(we,{padding:1,children:u.jsx(rs,{openPopup:m,previewLocationOrigin:R,previewLocationRoute:N,perspective:d,targetOrigin:x})}),e[66]=m,e[67]=d,e[68]=R,e[69]=N,e[70]=x,e[71]=_e):_e=e[71];let Me;e[72]!==c||e[73]!==N||e[74]!==P||e[75]!==Ie||e[76]!==_e?(Me=u.jsx(we,{flex:1,children:u.jsx(as,{previewUrlRef:P,prefix:Ie,onChange:c,suffix:_e,value:N})}),e[72]=c,e[73]=N,e[74]=P,e[75]=Ie,e[76]=_e,e[77]=Me):Me=e[77];let je;e[78]!==G?(je=ht=>{ht?.style.setProperty("view-transition-name",G)},e[78]=G,e[79]=je):je=e[79];const Be=j==="desktop"?"narrow":"full";let Ee;e[80]!==S||e[81]!==Be?(Ee=S("preview-frame.viewport-button.tooltip",{context:Be}),e[80]=S,e[81]=Be,e[82]=Ee):Ee=e[82];let Ue;e[83]!==Ee?(Ue=u.jsx(se,{size:1,children:Ee}),e[83]=Ee,e[84]=Ue):Ue=e[84];let Le;e[85]===Symbol.for("react.memo_cache_sentinel")?(Le=["bottom-start"],e[85]=Le):Le=e[85];let Re;e[86]!==S?(Re=S("preview-frame.viewport-button.aria-label"),e[86]=S,e[87]=Re):Re=e[87];const We=j==="desktop"?Nn:Wn;let Ce;e[88]!==Re||e[89]!==We||e[90]!==_||e[91]!==j?(Ce=u.jsx(Oe,{"data-testid":"preview-viewport-toggle","data-viewport":j,"aria-label":Re,icon:We,mode:"bleed",onClick:_,tooltipProps:null}),e[88]=Re,e[89]=We,e[90]=_,e[91]=j,e[92]=Ce):Ce=e[92];let Ae;e[93]!==je||e[94]!==Ue||e[95]!==Ce?(Ae=u.jsx(le,{align:"center",flex:"none",gap:1,children:u.jsx(gt,{animate:!0,ref:je,content:Ue,fallbackPlacements:Le,placement:"bottom",portal:!0,children:Ce})}),e[93]=je,e[94]=Ue,e[95]=Ce,e[96]=Ae):Ae=e[96];let ue;e[97]!==t||e[98]!==a||e[99]!==i||e[100]!==s||e[101]!==d||e[102]!==N?(ue=t&&u.jsx(le,{align:"center",flex:"none",gap:1,children:u.jsx(ps,{canToggleSharePreviewAccess:a,canUseSharedPreviewAccess:i,previewLocationRoute:N,initialUrl:s,perspective:d})}),e[97]=t,e[98]=a,e[99]=i,e[100]=s,e[101]=d,e[102]=N,e[103]=ue):ue=e[103];let Fe;return e[104]!==pe||e[105]!==Me||e[106]!==J||e[107]!==Ae||e[108]!==ue?(Fe=u.jsxs(le,{align:"center",gap:1,paddingX:1,style:K,children:[J,pe,Me,Ae,ue]}),e[104]=pe,e[105]=Me,e[106]=J,e[107]=Ae,e[108]=ue,e[109]=Fe):Fe=e[109],Fe};function hs(r){const e=z.c(7),t=fs,a=r.options?.component;let i;e[0]!==a||e[1]!==r?(i=a?u.jsx(a,{...r,renderDefault:t}):t(r),e[0]=a,e[1]=r,e[2]=i):i=e[2];const n=i;let s;e[3]===Symbol.for("react.memo_cache_sentinel")?(s={position:"relative"},e[3]=s):s=e[3];let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o={minHeight:0},e[4]=o):o=e[4];let c;return e[5]!==n?(c=u.jsx(me,{flex:"none",padding:2,borderBottom:!0,style:s,children:u.jsx(le,{align:"center",style:o,children:n})}),e[5]=n,e[6]=c):c=e[6],c}function fs(r){return u.jsx(ms,{...r})}function vs(r){return r.matches("loading")}function gs(r){return r.matches("loaded")}function ws(r){return r.matches({loaded:"refreshing"})}function ys(r){return r.matches({loaded:"reloading"})}function xs(r){return r.context.visualEditingOverlaysEnabled}function Ps(r){return r.hasTag("busy")}const Qt=xt.create(le),dn=y.memo(y.forwardRef(function(r,e){const{header:t,initialUrl:a,loadersConnection:i,overlaysConnection:n,perspective:s,viewport:o,vercelProtectionBypass:c,presentationRef:l,previewUrlRef:m}=r,[p,h]=y.useState(null),d=mt(p===null?s:p),f=y.useMemo(()=>{const I=new URL(a);return I.searchParams.get(pt)||I.searchParams.set(pt,d),(c||I.searchParams.get(vt))&&I.searchParams.set(ir,"samesitenone"),c&&!I.searchParams.get(vt)&&I.searchParams.set(vt,c),I},[a,d,c]);y.useEffect(()=>{i==="connected"&&h(I=>I===null?s:I)},[i,s]);const{t:g}=Te(ke),{devMode:x}=lr(),w=Un(),b=y.useRef(null),j=u.jsx(hs,{...r,iframeRef:b,options:t});y.useImperativeHandle(e,()=>b.current);const P=ae(l,I=>I.matches("loading")||I.matches({loaded:"reloading"})),[S,E]=y.useState(!1),_=ae(l,I=>I.matches({loaded:"refreshing"})),[R,v]=y.useState(!1),A=P||_||n==="connecting",M=y.useCallback(()=>{b.current&&(b.current.src=f.toString(),l.send({type:"iframe reload"}))},[l,f]),[k,U]=y.useState(!1),O=y.useCallback(()=>{U(!0)},[]),[T,W]=y.useState(!1);y.useEffect(()=>{if(!(P||_)&&(n==="connecting"||n==="reconnecting")){const I=setTimeout(()=>{W(!0)},5e3);return()=>clearTimeout(I)}},[n,P,_]),y.useEffect(()=>{if(!(P||_||!T)){if(n==="connected"&&(v(!1),W(!1),E(!1),U(!1)),n==="connecting"){const I=setTimeout(()=>{E(!0),console.error("Unable to connect to visual editing. Make sure you've setup '@sanity/visual-editing' correctly")},gr);return()=>clearTimeout(I)}if(n==="reconnecting"){const I=setTimeout(()=>{E(!0),v(!0)},gr);return()=>clearTimeout(I)}}},[P,n,_,T]);const C=y.useCallback(()=>{l.send({type:"iframe loaded"})},[l]),V=y.useMemo(()=>(P||n==="connecting"&&!_)&&!k,[k,P,_,n]),N=y.useSyncExternalStore(y.useCallback(()=>()=>{},[]),()=>CSS.supports("(view-transition-name: test)")),G=y.useMemo(()=>[V?"background":"active",P?"reloading":"idle",N?"":o,T&&!k?"timedOut":""],[N,k,P,V,T,o]),[L,K]=y.useState(o),[J,X]=y.useState(Xt[o]);y.useEffect(()=>{if(N&&o!==L){const I=()=>{K(o),X(Xt[o])};!w&&"startViewTransition"in document&&typeof document.startViewTransition=="function"?document.startViewTransition({update:()=>$n.flushSync(()=>I()),types:["sanity-iframe-viewport"]}):I()}},[N,w,L,o]);const B=Lt(),te=fr(m),[$,F]=y.useState(!1),[H]=y.useState(new Set),ee=kt(I=>{if(te.some(q=>q.test(I))){F(I);return}H.has(I)||(H.add(I),console.warn("Visual Editing is here but misconfigured",{reportedOrigin:I}),B.push({closable:!0,id:`presentation-iframe-origin-mismatch-${I}`,status:"error",duration:1/0,title:g("preview-frame.configuration.error.title"),description:u.jsx(ur,{t:g,i18nKey:"preview-frame.configuration.error.description",components:{Code:"code"},values:{targetOrigin:f.origin,reportedOrigin:I}})}))}),Y=Dn(),re=kt(I=>{if(!$)return;const q=new URL(I,$);Y(`${$}${q.pathname}${q.search}${q.hash}`)});return y.useEffect(()=>{if(!$)return;const I=b.current?.contentWindow;if(!I)return;const q=Br({targetOrigin:$});q.addTarget(I);const Q=q.createChannel({name:"presentation",heartbeat:!0,connectTo:"visual-editing"},Zt().provide({actors:er()}));Q.on("visual-editing/navigate",xe=>{re(xe.url)});const oe=Q.start();return()=>{oe(),q.destroy()}},[$]),y.useEffect(()=>{if(n==="connecting"||n==="reconnecting"){const I=setInterval(()=>{b.current?.contentWindow?.postMessage({domain:"sanity/channels",from:"presentation",type:"presentation/status"},"*")},1e3),q=new AbortController;return window.addEventListener("message",({data:Q})=>{Q&&typeof Q=="object"&&"domain"in Q&&Q.domain==="sanity/channels"&&"type"in Q&&Q.type==="visual-editing/status"&&"data"in Q&&typeof Q.data=="object"&&Q.data&&"origin"in Q.data&&typeof Q.data.origin=="string"&&ee(Q.data.origin)},{signal:q.signal}),()=>{q.abort(),clearInterval(I)}}},[n,S]),u.jsx(Ca,{transition:w?{duration:0}:void 0,children:u.jsxs(Ln,{children:[j,u.jsx(me,{flex:1,tone:"transparent",children:u.jsxs(le,{align:"center",height:"fill",justify:"center",padding:(N?L:o)==="desktop"?0:2,sizing:"border",style:{position:"relative",cursor:A?"wait":void 0},children:[u.jsx(Kr,{children:!R&&!P&&!_&&T&&!k?u.jsx(Qt,{initial:"initial",animate:"animate",exit:"exit",variants:Sr,justify:"center",align:"center",style:{inset:"0",position:"absolute",backdropFilter:S?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",transition:"backdrop-filter 0.2s ease-in-out",WebkitBackdropFilter:S?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",WebkitTransition:"-webkit-backdrop-filter 0.2s ease-in-out",zIndex:1},children:u.jsxs(le,{style:{...$t[o]},justify:"center",align:"center",direction:"column",gap:4,children:[S&&u.jsx(Oe,{disabled:!0,mode:"ghost",text:g("preview-frame.continue-button.text"),style:{opacity:0}}),u.jsx(me,{radius:2,tone:S?"caution":"inherit",padding:4,shadow:1,children:u.jsxs(le,{justify:"center",align:"center",direction:"column",gap:4,children:[u.jsx(It,{muted:!0}),u.jsx(se,{muted:!0,size:1,children:S?g("preview-frame.status",{context:"timeout"}):g("preview-frame.status",{context:"connecting"})})]})}),S&&u.jsx(Oe,{tone:"critical",onClick:O,text:g("preview-frame.continue-button.text")})]})}):(P||n==="connecting"&&!_)&&!k?u.jsx(Qt,{initial:"initial",animate:"animate",exit:"exit",variants:Sr,justify:"center",align:"center",style:{inset:"0",position:"absolute"},children:u.jsxs(le,{style:{...$t[o]},justify:"center",align:"center",direction:"column",gap:4,children:[u.jsx(It,{muted:!0}),u.jsx(se,{muted:!0,size:1,children:g("preview-frame.status",{context:"loading"})})]})}):R&&!k?u.jsx(Qt,{initial:"initial",animate:"animate",exit:"exit",variants:bs,justify:"center",align:"center",style:{background:"var(--card-bg-color)",inset:"0",position:"absolute"},children:u.jsx(hr,{flex:1,message:g("preview-frame.connection.error.text"),onRetry:M,onContinueAnyway:O,children:x&&u.jsxs(u.Fragment,{children:[n!=="connected"&&u.jsx(me,{padding:3,radius:2,tone:"critical",children:u.jsxs(He,{space:3,children:[u.jsx(Mt,{muted:!0,size:0,children:g("preview-frame.overlay.connection-status.label")}),u.jsx(Ut,{size:1,children:g("channel.status",{context:n})})]})}),i!=="connected"&&u.jsx(me,{padding:3,radius:2,tone:"critical",children:u.jsxs(He,{space:3,children:[u.jsx(Mt,{muted:!0,size:0,children:g("preview-frame.loader.connection-status.label")}),u.jsx(Ut,{size:1,children:g("channel.status",{context:i})})]})})]})})}):null}),u.jsx(Yi,{animate:G,initial:["background"],onLoad:C,preventClick:V,ref:b,src:f.toString(),style:J,variants:Xt})]})})]})})}));dn.displayName="Memo(ForwardRef(Preview))";const $t={desktop:{width:"100%",height:"100%"},mobile:{width:375,height:650}},Sr={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},bs={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},Xt={desktop:{...$t.desktop,boxShadow:"0 0 0 0px var(--card-border-color)"},mobile:{...$t.mobile,boxShadow:"0 0 0 1px var(--card-border-color)"},background:{opacity:0,scale:1},idle:{scale:1},reloading:{scale:[1,1,1,.98]},active:{opacity:[0,0,1],scale:1},timedOut:{opacity:[0,0,1]}};function Ss(){let r=!1;return(...e)=>{r||(console.warn(...e),r=!0)}}const _s=Ss();function js(r,e){const t=z.c(11);Mn(r);let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={},t[0]=a):a=t[0];const[i,n]=y.useState(a);let s;t[1]===Symbol.for("react.memo_cache_sentinel")?(s={},t[1]=s):s=t[1];const[o,c]=y.useState(s),l=y.useRef("");let m;t[2]!==e?(m=(b,j,P)=>{const S=(P===void 0?[]:P).filter(Rs);(j==="published"?n:c)(E=>{const _={};for(const v of S)_[v._id]=v;if(l.current!==e.current.url)return l.current=e.current.url,{[b]:_};const R=E[b];return Ra(R,_)?E:{...E,[b]:_}})},t[2]=e,t[3]=m):m=t[3];const p=m,h=r==="published"?i:o;let d;t[4]!==h?(d=Object.values(h).reduce(Es,{}),t[4]=h,t[5]=d):d=t[5];const f=d;let g;t[6]!==f?(g=Object.values(f),t[6]=f,t[7]=g):g=t[7];const x=g;let w;return t[8]!==x||t[9]!==p?(w=[x,p],t[8]=x,t[9]=p,t[10]=w):w=t[10],w}function Es(r,e){return Object.values(e).forEach(t=>{r[t._id]=t}),r}function Rs(r){return"_projectId"in r&&r._projectId?(_s("Cross dataset references are not supported yet, ignoring source document",r),!1):r}function pn(r,e){return r instanceof Function?r(e):r}function Cs(r,e){if(r.resolve){const t=r.resolve(e)?.filter;return t?`// groq
*[${t}][0]{_id, _type}`:void 0}return"type"in r?`// groq
*[_type == "${r.type}"][0]{_id, _type}`:`// groq
*[${pn(r.filter,e)}][0]{_id, _type}`}function As(r,e){return r.resolve?r.resolve(e)?.params??e.params:"type"in r?{}:pn(r.params,e)??e.params}function Ts(r,e){const t=Array.isArray(r)?r:[r];for(r of t){let{origin:a}=e,i=r;if(typeof r=="string")try{const n=new URL(r);if(n.origin!==a)continue;a=n.origin,i=n.pathname}catch{}try{const n=Ka(i,{decode:decodeURIComponent})(e.pathname);if(n){const{params:s,path:o}=n;return{origin:a,params:s,path:o}}}catch(n){throw new Error(`"${r}" is not a valid route pattern`,{cause:n})}}}function ks(r){const e=z.c(22),{navigate:t,navigationHistory:a,path:i,targetOrigin:n,resolvers:s,perspective:o}=r;let c;e[0]!==s?(c=s===void 0?[]:s,e[0]=s,e[1]=c):c=e[1];const l=c,{state:m}=yt();let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p={apiVersion:Ot},e[2]=p):p=e[2];const h=Dt(p);let d;e[3]!==i||e[4]!==m?(d=i||m._searchParams?.find(Is)?.[1]||"",e[3]=i,e[4]=m,e[5]=d):d=e[5];const f=d,[g,x]=y.useState(void 0),w=y.useRef(void 0);let b;e[6]!==t||e[7]!==a?(b=(E,_)=>{(!E||w.current!==E._id)&&(x({document:E,path:_.pathname}),w.current=E?._id,a.at(-1)?.id===a.at(-2)?.id&&t?.({state:{id:E?._id,type:E?._type}}))},e[6]=t,e[7]=a,e[8]=b):b=e[8];const j=kt(b);let P;e[9]!==h||e[10]!==j||e[11]!==o||e[12]!==f||e[13]!==l||e[14]!==n?(P=()=>{const E=new URL(f,n);if(l.length){let _;for(const R of l){const v=Ts(R.route,E);if(v){_={context:v,resolver:R};break}}if(_){const R=Cs(_.resolver,_.context),v=As(_.resolver,_.context);if(R){const A=new AbortController,M={perspective:o,signal:A.signal,tag:"use-main-document"};return h.fetch(R,v,M).then(k=>j(k,E)).catch(k=>{k instanceof Error&&k.name==="AbortError"||(x({document:void 0,path:E.pathname}),w.current=void 0)}),()=>{A.abort()}}}}x(void 0),w.current=void 0},e[9]=h,e[10]=j,e[11]=o,e[12]=f,e[13]=l,e[14]=n,e[15]=P):P=e[15];let S;return e[16]!==h||e[17]!==o||e[18]!==f||e[19]!==l||e[20]!==n?(S=[h,o,f,l,n],e[16]=h,e[17]=o,e[18]=f,e[19]=l,e[20]=n,e[21]=S):S=e[21],y.useEffect(P,S),g}function Is(r){const[e]=r;return e==="preview"}const Ms=/^([\w-]+):(0|[1-9][0-9]*)$/,Us=/^([\w-]+):([0-9]+),([0-9]+)$/,$s=/^([\w-]+):([\w-]+)$/;function Ds(r){const e=[];for(const t of r.split(".")){const a=Ms.exec(t);if(a){e.push(a[1],Number(a[2]));continue}const i=Us.exec(t);if(i){e.push(i[1],[Number(i[2]),Number(i[3])]);continue}const n=$s.exec(t);if(n){e.push(n[1],{_key:n[2]});continue}e.push(t)}return e}function Ls(r){if(r===void 0)return;const e=decodeURIComponent(r)?.split(".");return e[0]==="drafts"&&e.shift(),e.join(".")}function Os(r){if(r!==void 0)return Hr.toString(Ds(decodeURIComponent(r)))}function zs(r){return{id:Ls(r.id),path:Os(r.path),type:r.type}}function _r(r){return Object.fromEntries(Object.entries(r).filter(([,e])=>e!==void 0&&e!==""&&e!==null))}const mn=()=>r=>r,Ns=mn()(["perspective","preview","viewport"]),Ws=mn()(["changesInspectorTab","comment","inspect","instruction","scheduledDraft","parentRefPath","path","pathKey","rev","since","template","templateParams","version","view"]);function Fs(r){const e=z.c(56),{initialPreviewUrl:t,routerNavigate:a,routerState:i,routerSearchParams:n}=r;let s;e[0]!==i?(s=zs(i),e[0]=i,e[1]=s):s=e[1];const{id:o,path:c,type:l}=s;let m;e[2]!==t||e[3]!==n.preview?(m=n.preview||t.toString(),e[2]=t,e[3]=n.preview,e[4]=m):m=e[4];const p=n.changesInspectorTab;let h;e[5]!==o||e[6]!==c||e[7]!==n.comment||e[8]!==n.inspect||e[9]!==n.instruction||e[10]!==n.parentRefPath||e[11]!==n.pathKey||e[12]!==n.perspective||e[13]!==n.rev||e[14]!==n.scheduledDraft||e[15]!==n.since||e[16]!==n.template||e[17]!==n.templateParams||e[18]!==n.view||e[19]!==n.viewport||e[20]!==m||e[21]!==p||e[22]!==l?(h={id:o,type:l,path:c,preview:m,perspective:n.perspective,viewport:n.viewport,inspect:n.inspect,scheduledDraft:n.scheduledDraft,parentRefPath:n.parentRefPath,rev:n.rev,since:n.since,template:n.template,templateParams:n.templateParams,view:n.view,pathKey:n.pathKey,instruction:n.instruction,comment:n.comment,changesInspectorTab:p},e[5]=o,e[6]=c,e[7]=n.comment,e[8]=n.inspect,e[9]=n.instruction,e[10]=n.parentRefPath,e[11]=n.pathKey,e[12]=n.perspective,e[13]=n.rev,e[14]=n.scheduledDraft,e[15]=n.since,e[16]=n.template,e[17]=n.templateParams,e[18]=n.view,e[19]=n.viewport,e[20]=m,e[21]=p,e[22]=l,e[23]=h):h=e[23];const d=h;let f;e[24]!==d.changesInspectorTab||e[25]!==d.comment||e[26]!==d.inspect||e[27]!==d.instruction||e[28]!==d.parentRefPath||e[29]!==d.path||e[30]!==d.pathKey||e[31]!==d.rev||e[32]!==d.scheduledDraft||e[33]!==d.since||e[34]!==d.template||e[35]!==d.templateParams||e[36]!==d.view?(f=_r({inspect:d.inspect,scheduledDraft:d.scheduledDraft,path:d.path,parentRefPath:d.parentRefPath,rev:d.rev,since:d.since,template:d.template,templateParams:d.templateParams,view:d.view,pathKey:d.pathKey,instruction:d.instruction,comment:d.comment,changesInspectorTab:d.changesInspectorTab}),e[24]=d.changesInspectorTab,e[25]=d.comment,e[26]=d.inspect,e[27]=d.instruction,e[28]=d.parentRefPath,e[29]=d.path,e[30]=d.pathKey,e[31]=d.rev,e[32]=d.scheduledDraft,e[33]=d.since,e[34]=d.template,e[35]=d.templateParams,e[36]=d.view,e[37]=f):f=e[37];const g=f;let x;e[38]!==d.perspective||e[39]!==d.preview||e[40]!==d.viewport?(x=_r({perspective:d.perspective,preview:d.preview,viewport:d.viewport}),e[38]=d.perspective,e[39]=d.preview,e[40]=d.viewport,e[41]=x):x=e[41];const w=x,b=y.useRef(i);let j,P;e[42]!==i?(j=()=>{b.current=i},P=[i],e[42]=i,e[43]=j,e[44]=P):(j=e[43],P=e[44]),y.useLayoutEffect(j,P);let S;e[45]!==i?(S=[i],e[45]=i,e[46]=S):S=e[46];const[E,_]=y.useState(S);let R;e[47]===Symbol.for("react.memo_cache_sentinel")?(R=U=>{const{id:O,type:T}=U,{current:W}=b;return O===W.id&&T===W.type},e[47]=R):R=e[47];const v=R;let A;e[48]!==a?(A=U=>{const{state:O,params:T,replace:W}=U,C=W===void 0?!1:W;O?.id&&(O.id=Pt(O.id));const{current:V}=b,N={id:V.id,type:V.type,path:V.path},G=Object.fromEntries(V._searchParams||[]),L=O||N,K={...[...Ns,...v(L)?Ws:[]].reduce((X,B)=>(X[B]=G[B],X),{}),...T},J={...L,_searchParams:Object.entries(K).reduce(Vs,[])};_(X=>[...X,J]),a(J,{replace:C})},e[48]=a,e[49]=A):A=e[49];const M=A;let k;return e[50]!==M||e[51]!==E||e[52]!==d||e[53]!==w||e[54]!==g?(k={isSameDocument:v,navigate:M,navigationHistory:E,params:d,searchParams:w,structureParams:g},e[50]=M,e[51]=E,e[52]=d,e[53]=w,e[54]=g,e[55]=k):k=e[55],k}function Vs(r,e){const[t,a]=e;return[...r,[t,a]]}const Bs=r=>{const e=z.c(10),[t,a]=y.useState(Ks);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=p=>{const h=window.open(p,"_blank");h&&a(d=>new Set(d).add(h))},e[0]=i):i=e[0];const n=i;let s,o;e[1]!==r||e[2]!==t?(s=()=>{const p=[];if(t.size&&r)for(const h of t)h&&"closed"in h&&!h.closed&&p.push(r.addTarget(h));return()=>{p.forEach(Hs)}},o=[r,t],e[1]=r,e[2]=t,e[3]=s,e[4]=o):(s=e[3],o=e[4]),y.useEffect(s,o);let c,l;e[5]!==t?(c=()=>{if(t.size){const p=setInterval(()=>{const h=new Set;for(const d of t)d&&"closed"in d&&d.closed&&h.add(d);h.size&&a(d=>{const f=new Set(d);for(const g of h)f.delete(g);return f})},qn);return()=>{clearInterval(p)}}},l=[t],e[5]=t,e[6]=c,e[7]=l):(c=e[6],l=e[7]),y.useEffect(c,l);let m;return e[8]!==t?(m={popups:t,open:n},e[8]=t,e[9]=m):m=e[9],m};function Ks(){return new Set}function Hs(r){return r()}function hn(r){const e=z.c(5),{scheduledDraft:t}=r,{selectedPerspectiveName:a,selectedReleaseId:i,perspectiveStack:n}=Vr(),s=a===void 0?"drafts":a;let o;return e[0]!==n||e[1]!==t||e[2]!==s||e[3]!==i?(o=i||t?[t,...n]:s,e[0]=n,e[1]=t,e[2]=s,e[3]=i,e[4]=o):o=e[4],o}function Jt(){const r=z.c(4);let e;r[0]===Symbol.for("react.memo_cache_sentinel")?(e=new Map,r[0]=e):e=r[0];const[t,a]=y.useState(e);let i;e:{const l=Array.from(t.values());if(l.find(Qs)){i="connected";break e}const m=l.filter(qs);if(m.length){i=m.some(Gs)?"connecting":"reconnecting";break e}i="idle"}const n=i;let s;r[1]===Symbol.for("react.memo_cache_sentinel")?(s=l=>{a(m=>{const p=new Map(m);if(l.status==="disconnected")p.delete(l.connection);else{const h=p.get(l.connection)?.hasConnected||l.status==="connected",d=l.status==="handshaking"?"connecting":l.status;p.set(l.connection,{status:d,hasConnected:h})}return p})},r[1]=s):s=r[1];const o=s;let c;return r[2]!==n?(c=[n,o],r[2]=n,r[3]=c):c=r[3],c}function Gs(r){const{hasConnected:e}=r;return!e}function qs(r){const{status:e}=r;return e==="connecting"}function Qs(r){const{status:e}=r;return e==="connected"}const Xs=y.lazy(()=>ze(()=>import("./LiveQueries-iR2xhBGO.js"),__vite__mapDeps([2,1,3]))),Js=y.lazy(()=>ze(()=>import("./PostMessageDocuments-anlp3jyj.js"),__vite__mapDeps([4,1]))),Ys=y.lazy(()=>ze(()=>import("./PostMessageRefreshMutations-CXIQ0C1u.js"),__vite__mapDeps([5,1]))),Zs=y.lazy(()=>ze(()=>import("./PostMessagePerspective-DBOcXekH.js"),__vite__mapDeps([6,1]))),eo=y.lazy(()=>ze(()=>import("./PostMessagePreviewSnapshots-BTw9-9Fl.js"),__vite__mapDeps([7,1]))),to=y.lazy(()=>ze(()=>import("./PostMessageSchema-CfvPzu6O.js"),__vite__mapDeps([8,1]))),ro=y.lazy(()=>ze(()=>import("./PostMessageTelemetry-rvKTFnZr.js"),__vite__mapDeps([9,1]))),no=ye(le)`
  overflow-x: auto;
`;function ao(r){const e=z.c(196),{canToggleSharePreviewAccess:t,canUseSharedPreviewAccess:a,tool:i,vercelProtectionBypass:n,initialPreviewUrl:s,previewUrlRef:o}=r,c=fr(o),l=un(o),m=i.options?.components,p=i.name||Cn;let h;e[0]!==m?(h=m||{},e[0]=m,e[1]=h):h=e[1];const{unstable_navigator:d,unstable_header:f}=h,{navigate:g,state:x}=yt();let w;e[2]!==x._searchParams?(w=Object.fromEntries(x._searchParams||[]),e[2]=x._searchParams,e[3]=w):w=e[3];const b=Fr(w),j=ae(o,so);let P;e[4]!==i.options?.devMode?(P=()=>{const D=i.options?.devMode;return typeof D=="function"?D():typeof D=="boolean"?D:typeof window<"u"&&window.location.hostname==="localhost"},e[4]=i.options?.devMode,e[5]=P):P=e[5];const[S]=y.useState(P),E=y.useRef(null),[_,R]=y.useState(),[v,A]=y.useState(null);let M;e[6]===Symbol.for("react.memo_cache_sentinel")?(M={title:void 0,url:void 0},e[6]=M):M=e[6];const k=y.useRef(M);let U;e[7]!==s||e[8]!==g||e[9]!==b||e[10]!==x?(U={initialPreviewUrl:s,routerNavigate:g,routerState:x,routerSearchParams:b,frameStateRef:k},e[7]=s,e[8]=g,e[9]=b,e[10]=x,e[11]=U):U=e[11];const{isSameDocument:O,navigate:T,navigationHistory:W,params:C,searchParams:V,structureParams:N}=Fs(U);let G;e[12]!==C.scheduledDraft?(G={scheduledDraft:C.scheduledDraft},e[12]=C.scheduledDraft,e[13]=G):G=e[13];const L=hn(G),K=Wr(ri),J=C.viewport?"mobile":"desktop",[X,B]=js(L,k),te=An(),$=Tn(),F=i.options?.resolve?.mainDocuments;let H;e[14]!==T||e[15]!==W||e[16]!==C.preview||e[17]!==L||e[18]!==F||e[19]!==l?(H={navigate:T,navigationHistory:W,path:C.preview,targetOrigin:l,resolvers:F,perspective:L},e[14]=T,e[15]=W,e[16]=C.preview,e[17]=L,e[18]=F,e[19]=l,e[20]=H):H=e[20];const ee=ks(H),[Y,re]=Jt(),[I,q]=Jt(),[Q,oe]=Jt(),{open:xe}=Bs(_),he=ae(K,io);let fe,de;e[21]!==he||e[22]!==l?(fe=()=>{const D=E.current?.contentWindow;if(!D||he)return;const ne=Br({targetOrigin:l});return ne.addTarget(D),R(ne),()=>{ne.destroy(),R(void 0)}},de=[l,he],e[21]=he,e[22]=l,e[23]=fe,e[24]=de):(fe=e[23],de=e[24]),y.useEffect(fe,de);let ve;e[25]!==T?(ve=D=>{T(D)},e[25]=T,e[26]=ve):ve=e[26];const pe=kt(ve),$e=y.useRef(void 0);let Pe;e[27]!==_||e[28]!==pe||e[29]!==K||e[30]!==B||e[31]!==re||e[32]!==l?(Pe=()=>{if(!_)return;const D=_.createChannel({name:"presentation",heartbeat:!0,connectTo:"visual-editing"},Zt().provide({actors:er()}));D.on("visual-editing/focus",Z=>{"id"in Z&&pe({state:{type:Z.type,id:Z.id,path:Z.path}})}),D.on("visual-editing/navigate",Z=>{const{title:ft}=Z;let Ke=Z.url;if(!Ke.startsWith("http"))try{Ke=new URL(Ke,l).toString()}catch{}if(k.current.url!==Ke){const gn=()=>{const[wn,yn]=Ke.split("?"),Tt=new URLSearchParams(yn);Tt.delete(vt),Tt.delete(ir),pe({params:{preview:`${wn}${Tt.size>0?"?":""}${Tt}`}})};try{gn()}catch{pe({params:{preview:Ke}})}}k.current={title:ft,url:Ke}}),D.on("visual-editing/meta",Z=>{k.current.title=Z.title}),D.on("visual-editing/toggle",Z=>{K.send({type:"toggle visual editing overlays",enabled:Z.enabled})}),D.on("visual-editing/documents",Z=>{B("visual-editing",Z.perspective,Z.documents)}),D.on("visual-editing/refreshing",Z=>{Z.source==="manual"?clearTimeout($e.current):Z.source==="mutation"&&K.send({type:"iframe refresh"})}),D.on("visual-editing/refreshed",()=>{K.send({type:"iframe loaded"})}),D.onStatus(re);const ne=D.start();return A(D),()=>{ne(),A(null)}},e[27]=_,e[28]=pe,e[29]=K,e[30]=B,e[31]=re,e[32]=l,e[33]=Pe):Pe=e[33];let De;e[34]!==_||e[35]!==K||e[36]!==B||e[37]!==re||e[38]!==l?(De=[_,K,B,re,l],e[34]=_,e[35]=K,e[36]=B,e[37]=re,e[38]=l,e[39]=De):De=e[39],y.useEffect(Pe,De);let be;e[40]!==_||e[41]!==$||e[42]!==te||e[43]!==B||e[44]!==oe?(be=()=>{if(!_)return;const D=_.createChannel({name:"presentation",connectTo:"preview-kit",heartbeat:!0},Zt().provide({actors:er()}));return D.onStatus(oe),D.on("preview-kit/documents",ne=>{ne.projectId===te&&ne.dataset===$&&B("preview-kit",ne.perspective,ne.documents)}),D.start()},e[40]=_,e[41]=$,e[42]=te,e[43]=B,e[44]=oe,e[45]=be):be=e[45];let Ne;e[46]!==_||e[47]!==$||e[48]!==te||e[49]!==B||e[50]!==oe||e[51]!==l?(Ne=[_,$,te,B,oe,l],e[46]=_,e[47]=$,e[48]=te,e[49]=B,e[50]=oe,e[51]=l,e[52]=Ne):Ne=e[52],y.useEffect(be,Ne);let Se;e[53]!==O||e[54]!==T?(Se=tn(D=>{O(D)&&T({state:D,replace:!0})},0),e[53]=O,e[54]=T,e[55]=Se):Se=e[55];const Ie=Se;let _e;e[56]!==c||e[57]!==T||e[58]!==C.preview||e[59]!==l?(_e=D=>{const ne=new URL(D,l),Z=ne.toString();C.preview!==Z&&(Array.isArray(c)?c.some(ft=>ft.test(Z))&&T({params:{preview:Z}}):ne.origin===l&&T({params:{preview:Z}}))},e[56]=c,e[57]=T,e[58]=C.preview,e[59]=l,e[60]=_e):_e=e[60];const Me=_e;let je;e[61]!==T?(je=D=>{T({params:D})},e[61]=T,e[62]=je):je=e[62];const Be=je;let Ee;e[63]!==T?(Ee=D=>{T(D)},e[63]=T,e[64]=Ee):Ee=e[64];const Ue=Ee;let Le,Re;e[65]!==C.id||e[66]!==C.path||e[67]!==v?(Le=()=>{C.id&&C.path?v?.post("presentation/focus",{id:C.id,path:C.path}):v?.post("presentation/blur")},Re=[C.id,C.path,v],e[65]=C.id,e[66]=C.path,e[67]=v,e[68]=Le,e[69]=Re):(Le=e[68],Re=e[69]),y.useEffect(Le,Re);let We,Ce;e[70]!==Y||e[71]!==C.preview||e[72]!==l||e[73]!==v?(We=()=>{if(k.current.url&&C.preview&&k.current.url!==C.preview){try{const D=new URL(k.current.url,l).origin,ne=new URL(C.preview,l).origin;if(D!==ne)return}catch{}if(k.current.url=C.preview,Y==="connected"){let D=C.preview;if(D.startsWith("http"))try{const ne=new URL(C.preview,l);D=ne.pathname+ne.search+ne.hash}catch{}v?.post("presentation/navigate",{url:D,type:"replace"})}}},Ce=[Y,l,C.preview,v],e[70]=Y,e[71]=C.preview,e[72]=l,e[73]=v,e[74]=We,e[75]=Ce):(We=e[74],Ce=e[75]),y.useEffect(We,Ce);let Ae;e[76]!==v?(Ae=()=>v?.post("presentation/toggle-overlay"),e[76]=v,e[77]=Ae):Ae=e[77];const ue=Ae,[Fe,ht]=y.useState(null);let bt,St;e[78]!==ue?(bt=()=>{const D=Z=>{jr(Z)&&ue()},ne=Z=>{jr(Z)&&ue(),co(["mod","\\"],Z)&&ue()};return window.addEventListener("keydown",ne),window.addEventListener("keyup",D),()=>{window.removeEventListener("keydown",ne),window.removeEventListener("keyup",D)}},St=[ue],e[78]=ue,e[79]=bt,e[80]=St):(bt=e[79],St=e[80]),y.useEffect(bt,St);const[zt,fn]=y.useState(null);let _t;e[81]!==d?(_t={unstable_navigator:d},e[81]=d,e[82]=_t):_t=e[82];const[vn,Nt]=Ki(_t),{navigatorEnabled:jt,toggleNavigator:Wt}=vn;let Et;e[83]!==I||e[84]!==K||e[85]!==Q||e[86]!==v?(Et=D=>{if(K.send({type:"iframe refresh"}),v){$e.current=window.setTimeout(D,300),v.post("presentation/refresh",{source:"manual",livePreviewEnabled:Q==="connected"||I==="connected"});return}D()},e[83]=I,e[84]=K,e[85]=Q,e[86]=v,e[87]=Et):Et=e[87];const Ft=Et,Vt=kn();let Rt;e[88]!==C.preview||e[89]!==Vt.name?(Rt=D=>{const{id:ne,type:Z,path:ft}=D;if(k.current.url)return{title:k.current.title||k.current.url,name:"edit",params:{id:ne,path:ft,type:Z,inspect:Xn,workspace:Vt.name,mode:Qn,preview:C.preview}}},e[88]=C.preview,e[89]=Vt.name,e[90]=Rt):Rt=e[90];const Bt=Rt;let Ct;e[91]!==T?(Ct=D=>{T({params:{viewport:D==="desktop"?void 0:"mobile"},replace:!0})},e[91]=T,e[92]=Ct):Ct=e[92];const Kt=Ct;let Ge;e[93]!==Nt?(Ge=u.jsx(Nt,{}),e[93]=Nt,e[94]=Ge):Ge=e[94];const Ht=jt?50:75;let qe;e[95]!==j||e[96]!==t||e[97]!==a||e[98]!==xe||e[99]!==Me||e[100]!==Ft||e[101]!==s||e[102]!==I||e[103]!==jt||e[104]!==Y||e[105]!==C.preview||e[106]!==L||e[107]!==K||e[108]!==o||e[109]!==Kt||e[110]!==l||e[111]!==Wt||e[112]!==ue||e[113]!==f||e[114]!==n||e[115]!==J?(qe=u.jsx(dn,{canSharePreviewAccess:j,canToggleSharePreviewAccess:t,canUseSharedPreviewAccess:a,header:f,initialUrl:s,loadersConnection:I,navigatorEnabled:jt,onPathChange:Me,onRefresh:Ft,openPopup:xe,overlaysConnection:Y,previewUrl:C.preview,perspective:L,ref:E,setViewport:Kt,targetOrigin:l,toggleNavigator:Wt,toggleOverlay:ue,viewport:J,vercelProtectionBypass:n,presentationRef:K,previewUrlRef:o},l),e[95]=j,e[96]=t,e[97]=a,e[98]=xe,e[99]=Me,e[100]=Ft,e[101]=s,e[102]=I,e[103]=jt,e[104]=Y,e[105]=C.preview,e[106]=L,e[107]=K,e[108]=o,e[109]=Kt,e[110]=l,e[111]=Wt,e[112]=ue,e[113]=f,e[114]=n,e[115]=J,e[116]=qe):qe=e[116];let Qe;e[117]!==zt||e[118]!==qe?(Qe=u.jsx(le,{direction:"column",flex:1,height:"fill",ref:fn,children:u.jsx(Jn,{element:zt,children:qe})}),e[117]=zt,e[118]=qe,e[119]=Qe):Qe=e[119];let Xe;e[120]!==Ht||e[121]!==Qe?(Xe=u.jsx(mr,{id:"preview",minWidth:325,defaultSize:Ht,order:3,children:Qe}),e[120]=Ht,e[121]=Qe,e[122]=Xe):Xe=e[122];let Je;e[123]!==X||e[124]!==Bt||e[125]!==Ue||e[126]!==Ie||e[127]!==Be||e[128]!==ee||e[129]!==C.id||e[130]!==C.type||e[131]!==V||e[132]!==N?(Je=u.jsx(Fi,{documentId:C.id,documentsOnPage:X,documentType:C.type,getCommentIntent:Bt,mainDocumentState:ee,onEditReference:Ue,onFocusPath:Ie,onStructureParams:Be,searchParams:V,setDisplayedDocument:ht,structureParams:N}),e[123]=X,e[124]=Bt,e[125]=Ue,e[126]=Ie,e[127]=Be,e[128]=ee,e[129]=C.id,e[130]=C.type,e[131]=V,e[132]=N,e[133]=Je):Je=e[133];let Ye;e[134]!==Ge||e[135]!==Xe||e[136]!==Je?(Ye=u.jsx(no,{"data-testid":"presentation-root",height:"fill",children:u.jsxs(hi,{children:[Ge,Xe,Je]})}),e[134]=Ge,e[135]=Xe,e[136]=Je,e[137]=Ye):Ye=e[137];let Ze;e[138]!==Ye||e[139]!==v?(Ze=u.jsx(ni,{comlink:v,children:Ye}),e[138]=Ye,e[139]=v,e[140]=Ze):Ze=e[140];let et;e[141]!==C||e[142]!==Ze?(et=u.jsx(Qi,{params:C,children:Ze}),e[141]=C,e[142]=Ze,e[143]=et):et=e[143];let tt;e[144]!==T||e[145]!==et?(tt=u.jsx(Vi,{navigate:T,children:et}),e[144]=T,e[145]=et,e[146]=tt):tt=e[146];let rt;e[147]!==S||e[148]!==p||e[149]!==T||e[150]!==C||e[151]!==V||e[152]!==N||e[153]!==tt?(rt=u.jsx(Xi,{devMode:S,name:p,navigate:T,params:C,searchParams:V,structureParams:N,children:tt}),e[147]=S,e[148]=p,e[149]=T,e[150]=C,e[151]=V,e[152]=N,e[153]=tt,e[154]=rt):rt=e[154];let nt;e[155]!==_||e[156]!==Fe||e[157]!==L||e[158]!==B||e[159]!==q?(nt=_&&u.jsx(Xs,{controller:_,perspective:L,liveDocument:Fe,onDocumentsOnPage:B,onLoadersConnection:q}),e[155]=_,e[156]=Fe,e[157]=L,e[158]=B,e[159]=q,e[160]=nt):nt=e[160];let at;e[161]!==I||e[162]!==C.id||e[163]!==C.type||e[164]!==Q||e[165]!==v?(at=v&&C.id&&C.type&&u.jsx(Ys,{comlink:v,id:C.id,type:C.type,loadersConnection:I,previewKitConnection:Q}),e[161]=I,e[162]=C.id,e[163]=C.type,e[164]=Q,e[165]=v,e[166]=at):at=e[166];let it;e[167]!==L||e[168]!==v?(it=v&&u.jsx(to,{comlink:v,perspective:L}),e[167]=L,e[168]=v,e[169]=it):it=e[169];let st;e[170]!==X||e[171]!==L||e[172]!==v?(st=v&&X.length>0&&u.jsx(eo,{comlink:v,perspective:L,refs:X}),e[170]=X,e[171]=L,e[172]=v,e[173]=st):st=e[173];let ot;e[174]!==L||e[175]!==v?(ot=v&&u.jsx(Js,{comlink:v,perspective:L}),e[174]=L,e[175]=v,e[176]=ot):ot=e[176];let ct;e[177]!==v?(ct=v&&u.jsx(ei,{comlink:v}),e[177]=v,e[178]=ct):ct=e[178];let lt;e[179]!==L||e[180]!==v?(lt=v&&u.jsx(Zs,{comlink:v,perspective:L}),e[179]=L,e[180]=v,e[181]=lt):lt=e[181];let ut;e[182]!==v?(ut=v&&u.jsx(ro,{comlink:v}),e[182]=v,e[183]=ut):ut=e[183];let dt;e[184]!==nt||e[185]!==at||e[186]!==it||e[187]!==st||e[188]!==ot||e[189]!==ct||e[190]!==lt||e[191]!==ut?(dt=u.jsxs(y.Suspense,{children:[nt,at,it,st,ot,ct,lt,ut]}),e[184]=nt,e[185]=at,e[186]=it,e[187]=st,e[188]=ot,e[189]=ct,e[190]=lt,e[191]=ut,e[192]=dt):dt=e[192];let At;return e[193]!==rt||e[194]!==dt?(At=u.jsxs(u.Fragment,{children:[rt,dt]}),e[193]=rt,e[194]=dt,e[195]=At):At=e[195],At}function io(r){return r.matches("loading")}function so(r){return r.context.previewMode?.shareAccess!==!1}function jr(r){return r.key==="Alt"}const oo=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),Er={alt:"altKey",ctrl:"ctrlKey",mod:oo?"metaKey":"ctrlKey",shift:"shiftKey"};function co(r,e){return r.every(t=>Er[t]?e[Er[t]]:e.key===t.toUpperCase())}function lo({client:r,currentUserId:e}){return ge(async()=>await Ja(r,"sanity/presentation",location.href,e))}function uo({client:r}){return ge(async()=>r.fetch(qr,{},{tag:"presentation.fallback-to-shared-access-secret"}))}function po({client:r,allowOption:e}){return ge(async({input:t})=>{const{initialUrl:a}=t;if(typeof URLPattern>"u"&&await ze(()=>import("./index-DPyTNidZ.js"),[]),!e)return[new URLPattern(a.origin)];const i=typeof e=="function"?await e({client:r,origin,initialUrl:a}):e,n=(Array.isArray(i)?i:[i]).map(s=>{const o=new URLPattern(s);if(o.hostname==="*")throw new Error("It's insecure to allow any hostname, it could disclose data to a malicious site");return o});return n.some(s=>s.test(a.origin))?n:[...n,new URLPattern(a.origin)]})}function mo({client:r,studioBasePath:e,previewUrlOption:t,perspective:a}){return ge(async({input:i})=>{const{origin:n}=location;if(typeof t=="function"){const s=await t({client:r,studioBasePath:e,previewUrlSecret:"",studioPreviewPerspective:mt(a),previewSearchParam:i.previewSearchParam});return new URL(s,n)}if(!t)return new URL("/",n);if(typeof t=="string")return new URL(t,n);if(typeof t.initial=="function"){const s=await t.initial({client:r,origin:n});return new URL(s,n)}return typeof t.initial=="string"?new URL(t.initial,n):new URL(t.preview||"/",t.origin||n)})}function ho({client:r,previewUrlOption:e}){return ge(async({input:t})=>{const{targetOrigin:a}=t;if(typeof e=="object"&&e?.draftMode)return{enable:e.draftMode.enable,shareAccess:e.draftMode.shareAccess??!0};if(!e||typeof e=="string"||typeof e=="function"||!e.previewMode)return!1;const i=typeof e.previewMode=="function"?await e.previewMode({client:r,origin,targetOrigin:a}):e.previewMode;return i===!1?!1:{enable:i.enable,shareAccess:i.shareAccess??!0}})}function fo({client:r,studioBasePath:e,previewUrlOption:t,perspective:a}){return ge(async({input:i})=>{const{previewUrlSecret:n,resolvedPreviewMode:s,initialUrl:o}=i;if(typeof t=="function"){const l=await t({client:r,studioBasePath:e,previewUrlSecret:n,studioPreviewPerspective:mt(a),previewSearchParam:o.toString()});return new URL(l,o)}if(!s)throw new Error("Resolved preview mode is false");const c=new URL(s.enable,o);return c.searchParams.set(ar,n),c.searchParams.set(pt,mt(a)),o.pathname!==c.pathname&&c.searchParams.set(nr,`${o.pathname}${o.search}${o.hash}`),c})}const vo=ge(async({input:r})=>{const{previewSearchParam:e,initialUrl:t,allowOrigins:a}=r;if(!e)return t;try{const i=new URL(e,t.origin);return a.some(n=>n.test(i.origin))?i:t}catch{return t}}),Yt={_id:wt,_type:or},go={_id:`drafts.${Ur()}`,_type:$r},wo=zr({actions:{"notify preview will likely fail":In("Missing permissions to create preview secret, or read shared preview secret. Preview will likely fail loading."),"assign preview search param":ie({previewSearchParam:(r,e)=>e.previewSearchParam}),"assign error":ie({error:(r,e)=>e.error instanceof Error?e.error:new Error(e.message,{cause:e.error})})},actors:{"check permission":Nr(()=>_a(()=>new Error("The 'check permission' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'check permission': fromObservable(({input}: {input: CheckPermissionInput}) => ...)}})"))),"resolve initial url":ge(()=>Promise.reject(new Error("The 'resolve initial url' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'resolve initial url': fromPromise(...)}})"))),"resolve allow patterns":ge(()=>Promise.reject(new Error("The 'resolve allow patterns' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'resolve allow pattern': fromPromise(...)}})"))),"resolve url from preview search param":vo,"resolve preview mode":ge(()=>Promise.reject(new Error("The 'resolve preview mode' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'resolve preview mode': fromPromise(...)}})"))),"create preview secret":ge(async()=>Promise.reject(new Error("The 'create preview secret' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'create preview secret': fromPromise(...)}})"))),"read shared preview secret":ge(async()=>Promise.reject(new Error("The 'read shared preview secret' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'read shared preview secret': fromPromise(...)}})"))),"resolve preview mode url":ge(()=>Promise.reject(new Error("The 'resolve preview mode url' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'resolve preview mode url': fromPromise(...)}})")))},guards:{"has checked permissions":({context:r})=>!!(r.previewAccessSharingCreatePermission&&r.previewAccessSharingReadPermission&&r.previewAccessSharingUpdatePermission&&r.previewUrlSecretPermission),"search param has new origin":({context:r,event:e})=>{if(!r.previewUrl||!e.previewSearchParam)return!1;try{const t=new URL(e.previewSearchParam,r.previewUrl);return r.previewUrl.origin!==t.origin}catch{return!1}},"can create preview secret":({context:r})=>r.previewUrlSecretPermission?.granted===!0,"has preview mode with created secret":({context:r},e)=>e===!1?!1:r.previewUrlSecretPermission?.granted===!0,"has preview mode with share access":({context:r},e)=>e===!1?!1:r.previewAccessSharingReadPermission?.granted===!0,"has preview mode without permissions":({context:r},e)=>e===!1?!1:r.previewAccessSharingReadPermission?.granted===!1&&r.previewUrlSecretPermission?.granted===!1},delays:{expiredSecret:({context:r})=>{if(!r.previewUrlSecret?.expiresAt)return 0;const e=Date.now(),t=r.previewUrlSecret.expiresAt.getTime();return Math.max(t-e,0)}}}).createMachine({id:"Preview URL",context:({input:r})=>({initialUrl:null,previewUrl:null,error:null,allowOrigins:null,previewSearchParam:r.previewSearchParam,previewUrlSecret:null,previewAccessSharingCreatePermission:null,previewAccessSharingReadPermission:null,previewAccessSharingUpdatePermission:null,previewUrlSecretPermission:null,previewMode:null}),invoke:[{src:"check permission",input:()=>({checkPermissionName:"read",document:Yt}),onError:{target:".error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to check permission",error:r.error})}},onSnapshot:{actions:ie({previewAccessSharingReadPermission:({event:r})=>r.snapshot.context??null})}},{src:"check permission",input:()=>({checkPermissionName:"create",document:Yt}),onError:{target:".error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to check permission",error:r.error})}},onSnapshot:{actions:ie({previewAccessSharingCreatePermission:({event:r})=>r.snapshot.context??null})}},{src:"check permission",input:()=>({checkPermissionName:"update",document:Yt}),onError:{target:".error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to check permission",error:r.error})}},onSnapshot:{actions:ie({previewAccessSharingUpdatePermission:({event:r})=>r.snapshot.context??null})}},{src:"check permission",input:()=>({checkPermissionName:"create",document:go}),onError:{target:".error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to check permission",error:r.error})}},onSnapshot:{actions:ie({previewUrlSecretPermission:({event:r})=>r.snapshot.context??null})}}],on:{"set preview search param":{actions:{type:"assign preview search param",params:({event:r})=>({previewSearchParam:r.previewSearchParam})}}},states:{checkingPermissions:{always:{guard:"has checked permissions",target:"resolvingInitialUrl"},tags:"busy"},resolvingInitialUrl:{invoke:{src:"resolve initial url",input:({context:r})=>({previewSearchParam:r.previewSearchParam}),onError:{target:"error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to resolve initial url",error:r.error})}},onDone:{target:"resolvingAllowPatterns",actions:ie({initialUrl:({event:r})=>r.output})}},tags:"busy"},error:{type:"final",tags:"error"},resolvingAllowPatterns:{invoke:{src:"resolve allow patterns",input:({context:r})=>({initialUrl:r.initialUrl}),onError:{target:"error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to resolve preview url allow patterns",error:r.error})}},onDone:{target:"resolvingUrlFromPreviewSearchParam",actions:ie({allowOrigins:({event:r})=>r.output})}},tags:["busy"]},resolvingUrlFromPreviewSearchParam:{id:"loop",invoke:{src:"resolve url from preview search param",input:({context:r})=>({initialUrl:r.initialUrl,allowOrigins:r.allowOrigins,previewSearchParam:r.previewSearchParam}),onError:{target:"error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to resolve preview url from search param",error:r.error})}},onDone:{target:"resolvingPreviewMode",actions:ie({initialUrl:({event:r})=>r.output})}},tags:["busy"]},resolvingPreviewMode:{on:{"set preview search param":{guard:"search param has new origin",actions:{type:"assign preview search param",params:({event:r})=>({previewSearchParam:r.previewSearchParam})},target:"#loop",reenter:!0}},invoke:{src:"resolve preview mode",input:({context:r})=>({targetOrigin:r.initialUrl.origin}),onError:{target:"error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to resolve preview url allow patterns",error:r.error})}},onDone:[{guard:{type:"has preview mode with created secret",params:({event:r})=>r.output},actions:ie({previewMode:({event:r})=>r.output}),target:"previewMode.createPreviewSecret"},{guard:{type:"has preview mode with share access",params:({event:r})=>r.output},actions:ie({previewMode:({event:r})=>r.output}),target:"previewMode.readShareAccess"},{guard:{type:"has preview mode without permissions",params:({event:r})=>r.output},actions:[ie({previewUrl:({context:r})=>r.initialUrl}),"notify preview will likely fail"],target:"success"},{actions:ie({previewUrl:({context:r})=>r.initialUrl}),target:"success"}]},tags:["busy"]},success:{on:{"set preview search param":{guard:"search param has new origin",actions:{type:"assign preview search param",params:({event:r})=>({previewSearchParam:r.previewSearchParam})},target:"#loop",reenter:!0}}},previewMode:{on:{"set preview search param":{guard:"search param has new origin",actions:{type:"assign preview search param",params:({event:r})=>({previewSearchParam:r.previewSearchParam})},target:"#loop",reenter:!0}},states:{createPreviewSecret:{invoke:{src:"create preview secret",onError:{target:"error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to create preview secret",error:r.error})}},onDone:{target:"resolvePreviewUrl",actions:ie({previewUrlSecret:({event:r})=>r.output})}},tags:["busy"]},readShareAccess:{invoke:{src:"read shared preview secret",onError:{target:"error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to read shared preview secret",error:r.error})}},onDone:{target:"resolvePreviewUrl",actions:ie({previewUrlSecret:({event:r})=>({secret:r.output,expiresAt:new Date(Date.now()+1e3*60*60*60*24)})})}},tags:["busy"]},resolvePreviewUrl:{invoke:{src:"resolve preview mode url",input:({context:r})=>({initialUrl:r.initialUrl,resolvedPreviewMode:r.previewMode,previewUrlSecret:r.previewUrlSecret.secret}),onError:{target:"error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to resolve preview url",error:r.error})}},onDone:{target:"success",actions:ie({previewUrl:({event:r})=>r.output})}},tags:["busy"]},error:{type:"final",tags:["error"]},success:{after:{expiredSecret:{guard:"can create preview secret",actions:ie({previewUrlSecret:null}),target:"createPreviewSecret",reenter:!0}}}},initial:"readShareAccess"}},initial:"checkingPermissions"});function yo(r,e){const t=z.c(25),a=Rn();let i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={apiVersion:Ot},t[0]=i):i=t[0];const n=Dt(i),s=Lr()?.id,o=Or()?.activeWorkspace?.basePath||"/",c=yt();let l;t[1]!==c.state._searchParams?(l=new URLSearchParams(c.state._searchParams).get("preview"),t[1]=c.state._searchParams,t[2]=l):l=t[2];const m=l,{push:p}=Lt(),{t:h}=Te(ke);let d;t[3]===Symbol.for("react.memo_cache_sentinel")?(d={scheduledDraft:void 0},t[3]=d):d=t[3];const f=hn(d);let g;if(t[4]!==e||t[5]!==n||t[6]!==s||t[7]!==a||t[8]!==f||t[9]!==r||t[10]!==p||t[11]!==o||t[12]!==h){let S;t[14]!==p||t[15]!==h?(S=()=>p({id:"preview-url-secret.missing-grants",closable:!0,status:"error",duration:1/0,title:h("preview-url-secret.missing-grants")}),t[14]=p,t[15]=h,t[16]=S):S=t[16];let E;t[17]!==a?(E=_=>{const{input:R}=_;return a.checkDocumentPermission(R.checkPermissionName,R.document)},t[17]=a,t[18]=E):E=t[18],g=wo.provide({actions:{"notify preview will likely fail":S},actors:{"create preview secret":lo({client:n,currentUserId:s}),"read shared preview secret":uo({client:n}),"resolve allow patterns":po({client:n,allowOption:e}),"resolve initial url":mo({client:n,studioBasePath:o,previewUrlOption:r,perspective:f}),"resolve preview mode":ho({client:n,previewUrlOption:r}),"resolve preview mode url":fo({client:n,studioBasePath:o,previewUrlOption:r,perspective:f}),"check permission":Nr(E)}}),t[4]=e,t[5]=n,t[6]=s,t[7]=a,t[8]=f,t[9]=r,t[10]=p,t[11]=o,t[12]=h,t[13]=g}else g=t[13];let x;t[19]!==m?(x={input:{previewSearchParam:m}},t[19]=m,t[20]=x):x=t[20];const w=Wr(g,x);let b,j;t[21]!==w||t[22]!==m?(b=()=>{w.send({type:"set preview search param",previewSearchParam:m})},j=[w,m],t[21]=w,t[22]=m,t[23]=b,t[24]=j):(b=t[23],j=t[24]),y.useEffect(b,j);const P=ae(w,xo);if(P)throw P;return w}function xo(r){return r.status==="error"?r.error:r.hasTag("error")?r.context.error:null}function Po(r){const e=z.c(9),{t}=Te(ke),{push:a}=Lt(),i=yt();let n;e[0]!==i.state._searchParams?(n=new URLSearchParams(i.state._searchParams).get("preview"),e[0]=i.state._searchParams,e[1]=n):n=e[1];const s=n,o=ae(r,So),c=ae(r,bo);let l,m;e[2]!==o||e[3]!==c||e[4]!==s||e[5]!==a||e[6]!==t?(l=()=>{if(!Array.isArray(o)||!s||!c)return;const p=new URL(s,c).origin;o.some(h=>h.test(p))||a({closable:!0,id:`presentation-iframe-origin-mismatch-${p}`,status:"error",duration:1/0,title:t("preview-search-param.configuration.error.title"),description:u.jsx(ur,{t,i18nKey:"preview-search-param.configuration.error.description",components:{Code:"code"},values:{previewSearchParam:s,blockedOrigin:p}})})},m=[o,c,s,a,t],e[2]=o,e[3]=c,e[4]=s,e[5]=a,e[6]=t,e[7]=l,e[8]=m):(l=e[7],m=e[8]),y.useEffect(l,m)}function bo(r){return r.context.previewUrl?.origin}function So(r){return r.context.allowOrigins}function _o(){const r=z.c(7);let e;r[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:Ot},r[0]=e):e=r[0];const t=Dt(e),[a,i]=y.useReducer(jo,"loading"),[n,s]=y.useState(null);let o,c;r[1]!==t?(o=()=>{const m=Ya(t,p=>{s(p),i()});return()=>m()},c=[t],r[1]=t,r[2]=o,r[3]=c):(o=r[2],c=r[3]),y.useEffect(o,c);let l;return r[4]!==a||r[5]!==n?(l=[n,a],r[4]=a,r[5]=n,r[6]=l):l=r[6],l}function jo(){return"ready"}function Eo(r){const e=z.c(8),{tool:t}=r,a=yo(t.options?.previewUrl,t.options?.allowOrigins);Po(a);const i=ae(a,ko),n=ae(a,To),s=ae(a,Ao),o=ae(a,Co),c=ae(a,Ro),[l,m]=_o();if(!c||m==="loading"||!i||typeof i.granted>"u"||!n||typeof n.granted>"u"||!o||!s||typeof s.granted>"u"||typeof o.granted>"u"){let f;return e[0]===Symbol.for("react.memo_cache_sentinel")?(f=u.jsx(Dr,{}),e[0]=f):f=e[0],f}const p=i?.granted===!0&&n?.granted===!0,h=s?.granted===!0;let d;return e[1]!==a||e[2]!==p||e[3]!==h||e[4]!==t||e[5]!==c||e[6]!==l?(d=u.jsx(ao,{tool:t,initialPreviewUrl:c,vercelProtectionBypass:l,canToggleSharePreviewAccess:p,canUseSharedPreviewAccess:h,previewUrlRef:a}),e[1]=a,e[2]=p,e[3]=h,e[4]=t,e[5]=c,e[6]=l,e[7]=d):d=e[7],d}function Ro(r){return r.context.previewUrl}function Co(r){return r.context.previewUrlSecretPermission}function Ao(r){return r.context.previewAccessSharingReadPermission}function To(r){return r.context.previewAccessSharingUpdatePermission}function ko(r){return r.context.previewAccessSharingCreatePermission}const Uo=Object.freeze(Object.defineProperty({__proto__:null,default:Eo},Symbol.toStringTag,{value:"Module"}));export{Uo as P,er as c};
